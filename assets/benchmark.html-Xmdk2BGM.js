import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as d,c as e,e as r}from"./app-RP31lnfq.js";const a={},h=r('<h2 id="注意" tabindex="-1"><a class="header-anchor" href="#注意" aria-hidden="true">#</a> 注意</h2><p>此测试已经严重过时，不具备参考性。</p><h2 id="测试环境" tabindex="-1"><a class="header-anchor" href="#测试环境" aria-hidden="true">#</a> 测试环境</h2><ul><li>系统:Linux core 3.16.0-7-amd64 #1 SMP Debian 3.16.59-1 (2018-10-03) x86_64 GNU/Linux</li><li>内存:15G</li><li>CPU:Intel(R) Xeon(R) CPU E3-1220 v5 @ 3.00GHz;4 核</li><li>网络:千兆网卡</li><li>测试端采用回环网络方式访问服务器</li></ul><h2 id="测试工具" tabindex="-1"><a class="header-anchor" href="#测试工具" aria-hidden="true">#</a> 测试工具</h2><p>ZLMeidaKit 自带测试程序 test_benchmark，其为单进程多线程模型</p><h2 id="测试服务器" tabindex="-1"><a class="header-anchor" href="#测试服务器" aria-hidden="true">#</a> 测试服务器</h2><p>ZLMeidaKit 自带测试服务器 test_server,支持 RTSP/RTMP/HLS 服务器；多线程模型。</p><h2 id="测试媒体流" tabindex="-1"><a class="header-anchor" href="#测试媒体流" aria-hidden="true">#</a> 测试媒体流</h2><p>使用 test_server 拉取的 rtmp 流<code>rtmp://live.hkstv.hk.lxdns.com/live/hks1</code>;然后通过 test_server 转发代理。 该码流大概 300~400Kbit/s 左右。</p><h2 id="测试结果" tabindex="-1"><a class="header-anchor" href="#测试结果" aria-hidden="true">#</a> 测试结果</h2><p>说明:在 cmake 构建时，输入<code>cmake .. -DCMAKE_BUILD_TYPE=Release</code>以编译优化版本。</p><table><thead><tr><th>播放器个数(rtmp)</th><th>CPU(最大 400%)</th><th>内存(VIRT/RES)</th><th>带宽(平均)</th><th>丢包</th></tr></thead><tbody><tr><td>1000</td><td>20%</td><td>702M/13M</td><td>40 MByte/s</td><td>无</td></tr><tr><td>2000</td><td>39%</td><td>702M/18M</td><td>80 MByte/s</td><td>无</td></tr><tr><td>5000</td><td>92%</td><td>702M/32M</td><td>200 MByte/s</td><td>无</td></tr><tr><td>10000</td><td>170%</td><td>702M/59M</td><td>400 MByte/s</td><td>无</td></tr></tbody></table><table><thead><tr><th>播放器个数(rtsp/tcp)</th><th>CPU(最大 400%)</th><th>内存(VIRT/RES)</th><th>带宽(平均)</th><th>丢包</th></tr></thead><tbody><tr><td>1000</td><td>18%</td><td>702M/13M</td><td>42 MByte/s</td><td>无</td></tr><tr><td>2000</td><td>35%</td><td>702M/19M</td><td>82 MByte/s</td><td>无</td></tr><tr><td>5000</td><td>80%</td><td>702M/35M</td><td>198 MByte/s</td><td>无</td></tr><tr><td>10000</td><td>130%</td><td>702M/62M</td><td>405 MByte/s</td><td>无</td></tr></tbody></table><h2 id="srs-性能对比" tabindex="-1"><a class="header-anchor" href="#srs-性能对比" aria-hidden="true">#</a> srs 性能对比</h2><table><thead><tr><th>播放器个数(rtmp)</th><th>CPU(最大 400%)</th><th>内存(VIRT/RES)</th><th>带宽(平均)</th><th>丢包</th></tr></thead><tbody><tr><td>1000</td><td>10%</td><td>310M/53M</td><td>41.17 MByte/s</td><td>无</td></tr><tr><td>2000</td><td>18%</td><td>604M/117M</td><td>83.86 MByte/s</td><td>无</td></tr></tbody></table>',16),i=[h];function s(c,n){return d(),e("div",null,i)}const M=t(a,[["render",s],["__file","benchmark.html.vue"]]);export{M as default};
