import{_ as s}from"./push_test-WgKOKRFc.js";import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as t,o as r,c as p,a as i,d as a,b as l,w as o,e as c}from"./app-RP31lnfq.js";const d={},m=c(`<h2 id="push-testing" tabindex="-1"><a class="header-anchor" href="#push-testing" aria-hidden="true">#</a> Push Testing</h2><p>ZLMediaKit supports RTSP/RTMP/RTP push streaming. Typically, OBS/FFmpeg is used for push testing. The FFmpeg push commands are as follows:</p><ol><li><p>Pushing via RTSP:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># H.264 push</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h264 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> rtsp <span class="token parameter variable">-rtsp_transport</span> tcp rtsp://127.0.0.1/live/test
<span class="token comment"># H.265 push</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h265 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> rtsp <span class="token parameter variable">-rtsp_transport</span> tcp rtsp://127.0.0.1/live/test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Pushing via RTMP:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># If FFmpeg is not installed, you can also use OBS for push streaming</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h264 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> flv rtmp://127.0.0.1/live/test
<span class="token comment"># The RTMP standard does not support H.265, but there are domestic extensions. If you want FFmpeg to support RTMP-H.265, please follow the instructions in this article to compile: https://github.com/ksvc/FFmpeg/wiki/hevcpush</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Pushing via RTP:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># H.264 push</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h264 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> rtp_mpegts rtp://127.0.0.1:10000
<span class="token comment"># H.265 push</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h265 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> rtp_mpegts rtp://127.0.0.1:10000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="log-observation" tabindex="-1"><a class="header-anchor" href="#log-observation" aria-hidden="true">#</a> Log Observation</h2><p>If the push is successful, the following log will be printed:</p><figure><img src="`+s+`" alt="image" tabindex="0" loading="lazy"><figcaption>image</figcaption></figure><p>The relevant strings in the log represent:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2020</span>-04-10 <span class="token number">12</span>:51:52.331 I <span class="token operator">|</span> regist rtsp __defaultVhost__ rtp 206442D7
                                    ^           ^         ^      ^
                                  schema      vhost      app stream_id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="playback-url" tabindex="-1"><a class="header-anchor" href="#playback-url" aria-hidden="true">#</a> Playback URL</h2>`,9);function u(v,h){const e=t("RouterLink");return r(),p("div",null,[m,i("p",null,[a("Please refer to the "),l(e,{to:"/guide/media_server/play_url_rules.html"},{default:o(()=>[a("play URL rules")]),_:1}),a(" to play the aforementioned push stream.")])])}const f=n(d,[["render",u],["__file","push_test.html.vue"]]);export{f as default};
