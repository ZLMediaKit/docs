import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o as l,c as i,a as t,d as n,b as e,e as a}from"./app-RP31lnfq.js";const r={},c=t("h2",{id:"下载-postman-配置文件-可以在线测试-restful-api",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#下载-postman-配置文件-可以在线测试-restful-api","aria-hidden":"true"},"#"),n(" 下载 postman 配置文件(可以在线测试 restful api)")],-1),d={href:"https://github.com/xia-chu/ZLMediaKit/tree/master/postman",target:"_blank",rel:"noopener noreferrer"},u={href:"https://github.com/xia-chu/ZLMediaKit/blob/master/server/WebApi.cpp#L261",target:"_blank",rel:"noopener noreferrer"},k=a(`<h2 id="api-预览" tabindex="-1"><a class="header-anchor" href="#api-预览" aria-hidden="true">#</a> API 预览</h2><p>MediaServer 是 ZLMediaKit 的主进程，目前支持以下 http api 接口，这些接口全部支持 GET/POST 方式，</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code>      &quot;/index/api/addFFmpegSource&quot;,
      &quot;/index/api/addStreamProxy&quot;,
      &quot;/index/api/close_stream&quot;,
      &quot;/index/api/close_streams&quot;,
      &quot;/index/api/delFFmpegSource&quot;,
      &quot;/index/api/delStreamProxy&quot;,
      &quot;/index/api/getAllSession&quot;,
      &quot;/index/api/getApiList&quot;,
      &quot;/index/api/getMediaList&quot;,
      &quot;/index/api/getServerConfig&quot;,
      &quot;/index/api/getThreadsLoad&quot;,
      &quot;/index/api/getWorkThreadsLoad&quot;,
      &quot;/index/api/kick_session&quot;,
      &quot;/index/api/kick_sessions&quot;,
      &quot;/index/api/restartServer&quot;,
      &quot;/index/api/setServerConfig&quot;,
      &quot;/index/api/isMediaOnline&quot;,
      &quot;/index/api/getMediaInfo&quot;,
      &quot;/index/api/getRtpInfo&quot;,
      &quot;/index/api/getMp4RecordFile&quot;,
      &quot;/index/api/startRecord&quot;,
      &quot;/index/api/stopRecord&quot;,
      &quot;/index/api/getRecordStatus&quot;,
      &quot;/index/api/getSnap&quot;,
      &quot;/index/api/openRtpServer&quot;,
      &quot;/index/api/closeRtpServer&quot;,
      &quot;/index/api/listRtpServer&quot;,
      &quot;/index/api/startSendRtp&quot;,
      &quot;/index/api/stopSendRtp&quot;,
      &quot;/index/api/getStatistic&quot;,
      &quot;/index/api/addStreamPusherProxy&quot;,
      &quot;/index/api/delStreamPusherProxy&quot;,
      &quot;/index/api/version&quot;,
      &quot;/index/api/getMediaPlayerList&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 POST 方式，参数既可以使用 urlencoded 方式也可以使用 json 方式。 操作这些 api 一般需要提供 secret 参数以便鉴权，如果操作 ip 是 127.0.0.1，那么可以无需鉴权。</p><h2 id="api-返回结果约定" tabindex="-1"><a class="header-anchor" href="#api-返回结果约定" aria-hidden="true">#</a> API 返回结果约定</h2><ul><li>HTTP 层面统一返回 200 状态码，body 统一为 json。</li><li>body 一般为以下样式：</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">-1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;失败提示&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>code 值代表执行结果，目前包含以下类型：</li></ul><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token punctuation">{</span>
    Exception <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token comment">//代码抛异常</span>
    InvalidArgs <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token comment">//参数不合法</span>
    SqlFailed <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token comment">//sql执行失败</span>
    AuthFailed <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token comment">//鉴权失败</span>
    OtherFailed <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">//业务代码执行失败，</span>
    Success <span class="token operator">=</span> <span class="token number">0</span><span class="token comment">//执行成功</span>
<span class="token punctuation">}</span> ApiErr<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>如果执行成功，那么<code>code == 0</code>,并且一般无<code>msg</code>字段。</p></li><li><p><code>code == -1</code>时代表业务代码执行不成功，更细的原因一般提供<code>result</code>字段，例如以下：</p></li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">-1</span><span class="token punctuation">,</span> # 代表业务代码执行失败
    <span class="token property">&quot;msg&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;can not find the stream&quot;</span><span class="token punctuation">,</span> # 失败提示
    <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token number">-2</span> # 业务代码执行失败具体原因
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>开发者一般只要关注<code>code</code>字段和<code>msg</code>字段，如果<code>code != 0</code>时，打印显示<code>msg</code>字段即可。</p></li><li><p><code>code == 0</code>时代表完全成功，如果有数据返回，一般提供<code>data</code>字段返回数据。</p></li></ul><h2 id="api-详解" tabindex="-1"><a class="header-anchor" href="#api-详解" aria-hidden="true">#</a> API 详解</h2><h3 id="_0、-index-api-getapilist" tabindex="-1"><a class="header-anchor" href="#_0、-index-api-getapilist" aria-hidden="true">#</a> 0、<code>/index/api/getApiList</code></h3>`,14),v=t("li",null,[t("p",null,"功能：获取 API 列表")],-1),g={href:"http://127.0.0.1/index/api/getApiList",target:"_blank",rel:"noopener noreferrer"},m=a(`<li><p>参数：无</p></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;/index/&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/addFFmpegSource&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/addStreamProxy&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/addStreamPusherProxy&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/closeRtpServer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/close_stream&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/delFFmpegSource&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/delStreamProxy&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/delStreamPusherProxy&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/downloadBin&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getAllSession&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getApiList&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getMediaInfo&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getMediaList&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getMp4RecordFile&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getRtpInfo&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getServerConfig&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getSnap&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getStatistic&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getThreadsLoad&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getWorkThreadsLoad&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/isMediaOnline&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/isRecording&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/kick_session&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/kick_sessions&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/listRtpServer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/openRtpServer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/pauseRtpCheck&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/restartServer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/resumeRtpCheck&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/setServerConfig&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/startRecord&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/startSendRtp&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/stopRecord&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/stopSendRtp&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/version&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/webrtc&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_flow_report&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_http_access&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_play&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_publish&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_record_hls&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_record_mp4&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_rtsp_auth&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_rtsp_realm&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_server_started&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_shell_login&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_stream_changed&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_stream_none_reader&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_stream_not_found&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_stream_not_found_ffmpeg&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),h=t("h3",{id:"_1、-index-api-getthreadsload",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_1、-index-api-getthreadsload","aria-hidden":"true"},"#"),n(" 1、"),t("code",null,"/index/api/getThreadsLoad")],-1),b=t("li",null,[t("p",null,"功能：获取各 epoll(或 select)线程负载以及延时")],-1),y={href:"http://127.0.0.1/index/api/getThreadsLoad",target:"_blank",rel:"noopener noreferrer"},x=a(`<li><p>参数：无</p></li><li><p>响应:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;delay&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # 该线程延时
         <span class="token property">&quot;load&quot;</span> <span class="token operator">:</span> <span class="token number">0</span> # 该线程负载，<span class="token number">0</span> ~ <span class="token number">100</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;delay&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
         <span class="token property">&quot;load&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),q=t("h3",{id:"_2、-index-api-getworkthreadsload",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_2、-index-api-getworkthreadsload","aria-hidden":"true"},"#"),n(" 2、"),t("code",null,"/index/api/getWorkThreadsLoad")],-1),_=t("li",null,[t("p",null,"功能：获取各后台 epoll(或 select)线程负载以及延时")],-1),f={href:"http://127.0.0.1/index/api/getWorkThreadsLoad",target:"_blank",rel:"noopener noreferrer"},S=a(`<li><p>参数：无</p></li><li><p>响应:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;delay&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # 该线程延时
         <span class="token property">&quot;load&quot;</span> <span class="token operator">:</span> <span class="token number">0</span> # 该线程负载，<span class="token number">0</span> ~ <span class="token number">100</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;delay&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
         <span class="token property">&quot;load&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),j=t("h3",{id:"_3、-index-api-getserverconfig",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_3、-index-api-getserverconfig","aria-hidden":"true"},"#"),n(" 3、"),t("code",null,"/index/api/getServerConfig")],-1),Y=t("li",null,[t("p",null,"功能：获取服务器配置")],-1),R={href:"http://127.0.0.1/index/api/getServerConfig",target:"_blank",rel:"noopener noreferrer"},N=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;api.apiDebug&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;api.secret&quot;</span><span class="token operator">:</span> <span class="token string">&quot;035c73f7-bb6b-4889-a715-d9eb2d1925cc&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ffmpeg.bin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/usr/local/bin/ffmpeg&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ffmpeg.cmd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;%s -i %s -c:a aac -strict -2 -ar 44100 -ab 48k -c:v libx264 -f flv %s&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ffmpeg.log&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/xzl/git/ZLMediaKit/cmake-build-debug/bin/ffmpeg/ffmpeg.log&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;general.enableVhost&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;general.flowThreshold&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1024&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;general.maxStreamWaitMS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;general.streamNoneReaderDelayMS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hls.fileBufSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;65536&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hls.filePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/xzl/git/ZLMediaKit/cmake-build-debug/bin/httpRoot&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hls.segDur&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hls.segNum&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.access_file_except_hls&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.admin_params&quot;</span><span class="token operator">:</span> <span class="token string">&quot;secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.enable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_flow_report&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_flow_report&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_http_access&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_http_access&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_play&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_play&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_publish&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_publish&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_record_mp4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_record_mp4&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_rtsp_auth&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_rtsp_auth&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_rtsp_realm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_rtsp_realm&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_shell_login&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_shell_login&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_stream_changed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_stream_changed&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_stream_none_reader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_stream_none_reader&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_stream_not_found&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_stream_not_found&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.timeoutSec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.charSet&quot;</span><span class="token operator">:</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.keepAliveSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.maxReqCount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.maxReqSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4096&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.notFound&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor=\\&quot;white\\&quot;&gt;&lt;center&gt;&lt;h1&gt;您访问的资源不存在！&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;ZLMediaKit-4.0&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;80&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.rootPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/xzl/git/ZLMediaKit/cmake-build-debug/bin/httpRoot&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.sendBufSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;65536&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.sslport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;443&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;multicast.addrMax&quot;</span><span class="token operator">:</span> <span class="token string">&quot;239.255.255.255&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;multicast.addrMin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;239.0.0.0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;multicast.udpTTL&quot;</span><span class="token operator">:</span> <span class="token string">&quot;64&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;record.appName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;record.filePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/xzl/git/ZLMediaKit/cmake-build-debug/bin/httpRoot&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;record.fileSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3600&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;record.sampleMS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtmp.handshakeSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtmp.keepAliveSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtmp.modifyStamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtmp.port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1935&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.audioMtuSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;600&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.clearCount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.cycleMS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;46800000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.maxRtpCount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.videoMtuSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1400&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.authBasic&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.handshakeSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.keepAliveSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;554&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.sslport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;322&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;shell.maxReqSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1024&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;shell.port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9000&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),P=t("h3",{id:"_4、-index-api-setserverconfig",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_4、-index-api-setserverconfig","aria-hidden":"true"},"#"),n(" 4、"),t("code",null,"/index/api/setServerConfig")],-1),V=t("li",null,[t("p",null,"功能：设置服务器配置")],-1),A={href:"http://127.0.0.1/index/api/setServerConfig?api.apiDebug=0",target:"_blank",rel:"noopener noreferrer"},M=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;changed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # 配置项变更个数
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>     # <span class="token number">0</span>代表成功
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),F=t("h3",{id:"_5、-index-api-restartserver",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_5、-index-api-restartserver","aria-hidden":"true"},"#"),n(" 5、"),t("code",null,"/index/api/restartServer")],-1),C=t("li",null,[t("p",null,"功能：重启服务器,只有 Daemon 方式才能重启，否则是直接关闭！")],-1),L={href:"http://127.0.0.1/index/api/restartServer",target:"_blank",rel:"noopener noreferrer"},B=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;服务器将在一秒后自动重启&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),T=t("h3",{id:"_6、-index-api-getmedialist",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_6、-index-api-getmedialist","aria-hidden":"true"},"#"),n(" 6、"),t("code",null,"/index/api/getMediaList")],-1),w=t("li",null,[t("p",null,"功能：获取流列表，可选筛选参数")],-1),I={href:"http://127.0.0.1/index/api/getMediaList",target:"_blank",rel:"noopener noreferrer"},E=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">N</td><td style="text-align:center;">筛选协议，例如 rtsp 或 rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">N</td><td style="text-align:center;">筛选虚拟主机，例如<code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">N</td><td style="text-align:center;">筛选应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">N</td><td style="text-align:center;">筛选流 id，例如 test</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
     <span class="token property">&quot;app&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;live&quot;</span><span class="token punctuation">,</span>  # 应用名
     <span class="token property">&quot;readerCount&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # 本协议观看人数
     <span class="token property">&quot;totalReaderCount&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # 观看总人数，包括hls/rtsp/rtmp/http-flv/ws-flv
     <span class="token property">&quot;schema&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;rtsp&quot;</span><span class="token punctuation">,</span> # 协议
     <span class="token property">&quot;stream&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;obs&quot;</span><span class="token punctuation">,</span> # 流id
     <span class="token property">&quot;originSock&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  # 客户端和服务器网络信息，可能为<span class="token null keyword">null</span>类型
            <span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;140241931428384&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;local_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span> <span class="token number">1935</span><span class="token punctuation">,</span>
            <span class="token property">&quot;peer_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;peer_port&quot;</span><span class="token operator">:</span> <span class="token number">50097</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token property">&quot;originType&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # 产生源类型，包括 unknown = <span class="token number">0</span><span class="token punctuation">,</span>rtmp_push=<span class="token number">1</span><span class="token punctuation">,</span>rtsp_push=<span class="token number">2</span><span class="token punctuation">,</span>rtp_push=<span class="token number">3</span><span class="token punctuation">,</span>pull=<span class="token number">4</span><span class="token punctuation">,</span>ffmpeg_pull=<span class="token number">5</span><span class="token punctuation">,</span>mp4_vod=<span class="token number">6</span><span class="token punctuation">,</span>device_chn=<span class="token number">7</span>
     <span class="token property">&quot;originTypeStr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MediaOriginType::rtmp_push&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;originUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rtmp://127.0.0.1:1935/live/hks2&quot;</span><span class="token punctuation">,</span> #产生源的url
     <span class="token property">&quot;createStamp&quot;</span><span class="token operator">:</span> <span class="token number">1602205811</span><span class="token punctuation">,</span> #GMT unix系统时间戳，单位秒
     <span class="token property">&quot;aliveSecond&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> #存活时间，单位秒
     <span class="token property">&quot;bytesSpeed&quot;</span><span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span> #数据产生速度，单位byte/s
     <span class="token property">&quot;tracks&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>    # 音视频轨道
        <span class="token punctuation">{</span>
           <span class="token property">&quot;channels&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # 音频通道数
           <span class="token property">&quot;codec_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> # H264 = <span class="token number">0</span><span class="token punctuation">,</span> H265 = <span class="token number">1</span><span class="token punctuation">,</span> AAC = <span class="token number">2</span><span class="token punctuation">,</span> G711A = <span class="token number">3</span><span class="token punctuation">,</span> G711U = <span class="token number">4</span>
           <span class="token property">&quot;codec_id_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CodecAAC&quot;</span><span class="token punctuation">,</span> # 编码类型名称
           <span class="token property">&quot;codec_type&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # Video = <span class="token number">0</span><span class="token punctuation">,</span> Audio = <span class="token number">1</span>
           <span class="token property">&quot;ready&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> # 轨道是否准备就绪
           <span class="token property">&quot;frames&quot;</span> <span class="token operator">:</span> <span class="token number">1119</span><span class="token punctuation">,</span> #累计接收帧数
           <span class="token property">&quot;sample_bit&quot;</span> <span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> # 音频采样位数
           <span class="token property">&quot;sample_rate&quot;</span> <span class="token operator">:</span> <span class="token number">8000</span> # 音频采样率
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
           <span class="token property">&quot;codec_id&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # H264 = <span class="token number">0</span><span class="token punctuation">,</span> H265 = <span class="token number">1</span><span class="token punctuation">,</span> AAC = <span class="token number">2</span><span class="token punctuation">,</span> G711A = <span class="token number">3</span><span class="token punctuation">,</span> G711U = <span class="token number">4</span>
           <span class="token property">&quot;codec_id_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CodecH264&quot;</span><span class="token punctuation">,</span> # 编码类型名称
           <span class="token property">&quot;codec_type&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Video = <span class="token number">0</span><span class="token punctuation">,</span> Audio = <span class="token number">1</span>
           <span class="token property">&quot;fps&quot;</span> <span class="token operator">:</span> <span class="token number">59</span><span class="token punctuation">,</span>  # 视频fps
           <span class="token property">&quot;frames&quot;</span> <span class="token operator">:</span> <span class="token number">1119</span><span class="token punctuation">,</span> #累计接收帧数，不包含sei/aud/sps/pps等不能解码的帧
           <span class="token property">&quot;gop_interval_ms&quot;</span> <span class="token operator">:</span> <span class="token number">1993</span><span class="token punctuation">,</span> #gop间隔时间，单位毫秒
           <span class="token property">&quot;gop_size&quot;</span> <span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> #gop大小，单位帧数
           <span class="token property">&quot;key_frames&quot;</span> <span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> #累计接收关键帧数
           <span class="token property">&quot;height&quot;</span> <span class="token operator">:</span> <span class="token number">720</span><span class="token punctuation">,</span> # 视频高
           <span class="token property">&quot;ready&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  # 轨道是否准备就绪
           <span class="token property">&quot;width&quot;</span> <span class="token operator">:</span> <span class="token number">1280</span> # 视频宽
        <span class="token punctuation">}</span>
     <span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token property">&quot;vhost&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;__defaultVhost__&quot;</span> # 虚拟主机名
   <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),z=t("h3",{id:"_7、-index-api-close-stream-已过期-请使用-close-streams-接口替换",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_7、-index-api-close-stream-已过期-请使用-close-streams-接口替换","aria-hidden":"true"},"#"),n(" 7、"),t("code",null,"/index/api/close_stream"),n("(已过期，请使用 close_streams 接口替换)")],-1),G=t("li",null,[t("p",null,"功能：关闭流(目前所有类型的流都支持关闭)")],-1),H={href:"http://127.0.0.1/index/api/close_stream?schema=rtmp&vhost=__defaultVhost__&app=live&stream=0&force=1",target:"_blank",rel:"noopener noreferrer"},D=t("code",null,"__defaultVhost__",-1),W=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">协议，例如 rtsp 或 rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 test</td></tr><tr><td style="text-align:center;">force</td><td style="text-align:center;">N</td><td style="text-align:center;">是否强制关闭(有人在观看是否还关闭)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span># <span class="token number">0</span><span class="token operator">:</span>成功，<span class="token number">-1</span><span class="token operator">:</span>关闭失败，<span class="token number">-2</span><span class="token operator">:</span>该流不存在
   <span class="token property">&quot;msg&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),O=t("h3",{id:"_8、-index-api-close-streams",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_8、-index-api-close-streams","aria-hidden":"true"},"#"),n(" 8、"),t("code",null,"/index/api/close_streams")],-1),U=t("li",null,[t("p",null,"功能：关闭流(目前所有类型的流都支持关闭)")],-1),K={href:"http://127.0.0.1/index/api/close_streams?schema=rtmp&vhost=__defaultVhost__&app=live&stream=0&force=1",target:"_blank",rel:"noopener noreferrer"},Z=t("code",null,"__defaultVhost__",-1),J=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">N</td><td style="text-align:center;">协议，例如 rtsp 或 rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">N</td><td style="text-align:center;">虚拟主机，例如<code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">N</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">N</td><td style="text-align:center;">流 id，例如 test</td></tr><tr><td style="text-align:center;">force</td><td style="text-align:center;">N</td><td style="text-align:center;">是否强制关闭(有人在观看是否还关闭)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;count_hit&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  # 筛选命中的流个数
   <span class="token property">&quot;count_closed&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> # 被关闭的流个数，可能小于count_hit
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Q=t("h3",{id:"_9、-index-api-getallsession",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_9、-index-api-getallsession","aria-hidden":"true"},"#"),n(" 9、"),t("code",null,"/index/api/getAllSession")],-1),X=t("li",null,[t("p",null,"功能：获取所有 TcpSession 列表(获取所有 tcp 客户端相关信息)")],-1),$={href:"http://127.0.0.1/index/api/getAllSession",target:"_blank",rel:"noopener noreferrer"},tt=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">local_port</td><td style="text-align:center;">N</td><td style="text-align:center;">筛选本机端口，例如筛选 rtsp 链接：554</td></tr><tr><td style="text-align:center;">peer_ip</td><td style="text-align:center;">N</td><td style="text-align:center;">筛选客户端 ip</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;140614477848784&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;local_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;local_port&quot;</span> <span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
         <span class="token property">&quot;peer_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;peer_port&quot;</span> <span class="token operator">:</span> <span class="token number">51136</span><span class="token punctuation">,</span>
         <span class="token property">&quot;typeid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;16WebSocketSessionI11EchoSessionN8mediakit11HttpSessionEE&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;140614443300192&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;local_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;local_port&quot;</span> <span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
         <span class="token property">&quot;peer_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;peer_port&quot;</span> <span class="token operator">:</span> <span class="token number">51135</span><span class="token punctuation">,</span>
         <span class="token property">&quot;typeid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;16WebSocketSessionI11EchoSessionN8mediakit11HttpSessionEE&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;140614440178720&quot;</span><span class="token punctuation">,</span>  # 该tcp链接唯一id
         <span class="token property">&quot;local_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>  # 本机网卡ip
         <span class="token property">&quot;local_port&quot;</span> <span class="token operator">:</span> <span class="token number">1935</span><span class="token punctuation">,</span> 			# 本机端口号	(这是个rtmp播放器或推流器)
         <span class="token property">&quot;peer_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>   # 客户端ip
         <span class="token property">&quot;peer_port&quot;</span> <span class="token operator">:</span> <span class="token number">51130</span><span class="token punctuation">,</span>				# 客户端端口号
         <span class="token property">&quot;typeid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;N8mediakit11RtmpSessionE&quot;</span>  # 客户端TCPSession typeid
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),nt=t("h3",{id:"_10、-index-api-kick-session",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_10、-index-api-kick-session","aria-hidden":"true"},"#"),n(" 10、"),t("code",null,"/index/api/kick_session")],-1),st=t("li",null,[t("p",null,"功能：断开 tcp 连接，比如说可以断开 rtsp、rtmp 播放器等")],-1),et={href:"http://127.0.0.1/index/api/kick_session?id=140614440178720",target:"_blank",rel:"noopener noreferrer"},at=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">Id</td><td style="text-align:center;">Y</td><td style="text-align:center;">客户端唯一 id，可以通过 getAllSession 接口获取</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),ot=t("h3",{id:"_11、-index-api-kick-sessions",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_11、-index-api-kick-sessions","aria-hidden":"true"},"#"),n(" 11、"),t("code",null,"/index/api/kick_sessions")],-1),pt=t("li",null,[t("p",null,"功能：断开 tcp 连接，比如说可以断开 rtsp、rtmp 播放器等")],-1),lt={href:"http://127.0.0.1/index/api/kick_sessions?local_port=554",target:"_blank",rel:"noopener noreferrer"},it=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">local_port</td><td style="text-align:center;">N</td><td style="text-align:center;">筛选本机端口，例如筛选 rtsp 链接：554</td></tr><tr><td style="text-align:center;">peer_ip</td><td style="text-align:center;">N</td><td style="text-align:center;">筛选客户端 ip</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;count_hit&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span># 筛选命中客户端个数
   <span class="token property">&quot;msg&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),rt=t("h3",{id:"_12、-index-api-addstreamproxy",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_12、-index-api-addstreamproxy","aria-hidden":"true"},"#"),n(" 12、"),t("code",null,"/index/api/addStreamProxy")],-1),ct=t("li",null,[t("p",null,"功能：动态添加 rtsp/rtmp/hls/http-ts/http-flv 拉流代理(只支持 H264/H265/aac/G711/opus 负载)")],-1),dt={href:"http://127.0.0.1/index/api/addStreamProxy?vhost=__defaultVhost__&app=proxy&stream=0&url=rtmp://live.hkstv.hk.lxdns.com/live/hks2",target:"_blank",rel:"noopener noreferrer"},ut=t("code",null,"__defaultVhost__",-1),kt=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">参数类型</th><th style="text-align:center;">释意</th><th style="text-align:center;">是否必选</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">api 操作密钥(配置文件配置)</td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">添加的流的虚拟主机，例如<code>__defaultVhost__</code></td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">添加的流的应用名，例如 live</td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">添加的流的 id 名，例如 test</td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">url</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">拉流地址，例如 rtmp://live.hkstv.hk.lxdns.com/live/hks2</td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">retry_count</td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">拉流重试次数，默认为-1 无限重试</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;">rtp_type</td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">rtsp 拉流时，拉流方式，0：tcp，1：udp，2：组播</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;">timeout_sec</td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">拉流超时时间，单位秒，float 类型</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_hls</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">是否转换成 hls-mpegts 协议</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_hls_fmp4</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">是否转换成 hls-fmp4 协议</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_mp4</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">是否允许 mp4 录制</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_rtsp</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">是否转 rtsp 协议</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_rtmp</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">是否转 rtmp/flv 协议</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_ts</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">是否转 http-ts/ws-ts 协议</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_fmp4</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">是否转 http-fmp4/ws-fmp4 协议</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>hls_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">该协议是否有人观看才生成</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>rtsp_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">该协议是否有人观看才生成</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>rtmp_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">该协议是否有人观看才生成</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>ts_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">该协议是否有人观看才生成</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>fmp4_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">该协议是否有人观看才生成</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_audio</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">转协议时是否开启音频</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>add_mute_audio</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">转协议时，无音频是否添加静音 aac 音频</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>mp4_save_path</code></td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">mp4 录制文件保存根目录，置空使用默认</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>mp4_max_second</code></td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">mp4 录制切片大小，单位秒</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>mp4_as_player</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">MP4 录制是否当作观看者参与播放人数计数</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>hls_save_path</code></td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">hls 文件保存保存根目录，置空使用默认</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>modify_stamp</code></td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">该流是否开启时间戳覆盖(0:绝对时间戳/1:系统时间戳/2:相对时间戳)</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>auto_close</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">无人观看是否自动关闭流(不触发无人观看 hook)</td><td style="text-align:center;">N</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;key&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;__defaultVhost__/proxy/0&quot;</span>  # 流的唯一标识
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),vt=t("h3",{id:"_13、-index-api-delstreamproxy-流注册成功后-也可以使用close-streams接口替代",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_13、-index-api-delstreamproxy-流注册成功后-也可以使用close-streams接口替代","aria-hidden":"true"},"#"),n(" 13、"),t("code",null,"/index/api/delStreamProxy(流注册成功后，也可以使用close_streams接口替代)")],-1),gt=t("li",null,[t("p",null,"功能：关闭拉流代理")],-1),mt={href:"http://127.0.0.1/index/api/delStreamProxy?key=__defaultVhost__/proxy/0",target:"_blank",rel:"noopener noreferrer"},ht=t("code",null,"__defaultVhost__",-1),bt=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">key</td><td style="text-align:center;">Y</td><td style="text-align:center;">addStreamProxy 接口返回的 key</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;flag&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # 成功与否
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),yt=t("h3",{id:"_14、-index-api-addffmpegsource",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_14、-index-api-addffmpegsource","aria-hidden":"true"},"#"),n(" 14、"),t("code",null,"/index/api/addFFmpegSource")],-1),xt=t("li",null,[t("p",null,"功能：通过 fork FFmpeg 进程的方式拉流代理，支持任意协议")],-1),qt={href:"http://127.0.0.1/index/api/addFFmpegSource?src_url=http://live.hkstv.hk.lxdns.com/live/hks2/playlist.m3u8&dst_url=rtmp://127.0.0.1/live/hks2&timeout_ms=10000&ffmpeg_cmd_key=ffmpeg.cmd",target:"_blank",rel:"noopener noreferrer"},_t=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">src_url</td><td style="text-align:center;">Y</td><td style="text-align:center;">FFmpeg 拉流地址,支持任意协议或格式(只要 FFmpeg 支持即可)</td></tr><tr><td style="text-align:center;">dst_url</td><td style="text-align:center;">Y</td><td style="text-align:center;">FFmpeg rtmp 推流地址，一般都是推给自己，例如 rtmp://127.0.0.1/live/stream_form_ffmpeg</td></tr><tr><td style="text-align:center;">timeout_ms</td><td style="text-align:center;">Y</td><td style="text-align:center;">FFmpeg 推流成功超时时间</td></tr><tr><td style="text-align:center;">enable_hls</td><td style="text-align:center;">Y</td><td style="text-align:center;">是否开启 hls 录制</td></tr><tr><td style="text-align:center;">enable_mp4</td><td style="text-align:center;">Y</td><td style="text-align:center;">是否开启 mp4 录制</td></tr><tr><td style="text-align:center;">ffmpeg_cmd_key</td><td style="text-align:center;">N</td><td style="text-align:center;">配置文件中 FFmpeg 命令参数模板 key(非内容)，置空则采用默认模板:<code>ffmpeg.cmd</code></td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;key&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5f748d2ef9712e4b2f6f970c1d44d93a&quot;</span>  # 唯一key
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),ft=t("h3",{id:"_15、-index-api-delffmpegsource-流注册成功后-也可以使用close-streams接口替代",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_15、-index-api-delffmpegsource-流注册成功后-也可以使用close-streams接口替代","aria-hidden":"true"},"#"),n(" 15、"),t("code",null,"/index/api/delFFmpegSource(流注册成功后，也可以使用close_streams接口替代)")],-1),St=t("li",null,[t("p",null,"功能：关闭 ffmpeg 拉流代理")],-1),jt={href:"http://127.0.0.1/index/api/delFFmpegSource?key=5f748d2ef9712e4b2f6f970c1d44d93a",target:"_blank",rel:"noopener noreferrer"},Yt=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">key</td><td style="text-align:center;">Y</td><td style="text-align:center;">addFFmpegSource 接口返回的 key</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;flag&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # 成功与否
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Rt=t("h3",{id:"_16、-index-api-ismediaonline-已过期-请使用getmedialist接口替代",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_16、-index-api-ismediaonline-已过期-请使用getmedialist接口替代","aria-hidden":"true"},"#"),n(" 16、"),t("code",null,"/index/api/isMediaOnline(已过期，请使用getMediaList接口替代)")],-1),Nt=t("li",null,[t("p",null,"功能：判断直播流是否在线")],-1),Pt={href:"http://127.0.0.1/index/api/isMediaOnline?schema=rtsp&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},Vt=t("code",null,"__defaultVhost__",-1),At=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">协议，例如 rtsp 或 rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 obs</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;online&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # 是否在线
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Mt=t("h3",{id:"_17、-index-api-getmediainfo-已过期-请使用getmedialist接口替代",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_17、-index-api-getmediainfo-已过期-请使用getmedialist接口替代","aria-hidden":"true"},"#"),n(" 17、"),t("code",null,"/index/api/getMediaInfo(已过期，请使用getMediaList接口替代)")],-1),Ft=t("li",null,[t("p",null,"功能：获取流相关信息")],-1),Ct={href:"http://127.0.0.1/index/api/getMediaInfo?schema=rtsp&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},Lt=t("code",null,"__defaultVhost__",-1),Bt=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">协议，例如 rtsp 或 rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 obs</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;online&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> # 是否在线
  <span class="token property">&quot;readerCount&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # 本协议观看人数
  <span class="token property">&quot;totalReaderCount&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # 观看总人数，包括hls/rtsp/rtmp/http-flv/ws-flv
  <span class="token property">&quot;tracks&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> # 轨道列表
        <span class="token punctuation">{</span>
           <span class="token property">&quot;channels&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # 音频通道数
           <span class="token property">&quot;codec_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> # H264 = <span class="token number">0</span><span class="token punctuation">,</span> H265 = <span class="token number">1</span><span class="token punctuation">,</span> AAC = <span class="token number">2</span><span class="token punctuation">,</span> G711A = <span class="token number">3</span><span class="token punctuation">,</span> G711U = <span class="token number">4</span>
           <span class="token property">&quot;codec_id_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CodecAAC&quot;</span><span class="token punctuation">,</span> # 编码类型名称
           <span class="token property">&quot;codec_type&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # Video = <span class="token number">0</span><span class="token punctuation">,</span> Audio = <span class="token number">1</span>
           <span class="token property">&quot;ready&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> # 轨道是否准备就绪
           <span class="token property">&quot;sample_bit&quot;</span> <span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> # 音频采样位数
           <span class="token property">&quot;sample_rate&quot;</span> <span class="token operator">:</span> <span class="token number">8000</span> # 音频采样率
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
           <span class="token property">&quot;codec_id&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # H264 = <span class="token number">0</span><span class="token punctuation">,</span> H265 = <span class="token number">1</span><span class="token punctuation">,</span> AAC = <span class="token number">2</span><span class="token punctuation">,</span> G711A = <span class="token number">3</span><span class="token punctuation">,</span> G711U = <span class="token number">4</span>
           <span class="token property">&quot;codec_id_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CodecH264&quot;</span><span class="token punctuation">,</span> # 编码类型名称
           <span class="token property">&quot;codec_type&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Video = <span class="token number">0</span><span class="token punctuation">,</span> Audio = <span class="token number">1</span>
           <span class="token property">&quot;fps&quot;</span> <span class="token operator">:</span> <span class="token number">59</span><span class="token punctuation">,</span>  # 视频fps
           <span class="token property">&quot;height&quot;</span> <span class="token operator">:</span> <span class="token number">720</span><span class="token punctuation">,</span> # 视频高
           <span class="token property">&quot;ready&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  # 轨道是否准备就绪
           <span class="token property">&quot;width&quot;</span> <span class="token operator">:</span> <span class="token number">1280</span> # 视频宽
        <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Tt=t("h3",{id:"_18、-index-api-getrtpinfo",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_18、-index-api-getrtpinfo","aria-hidden":"true"},"#"),n(" 18、"),t("code",null,"/index/api/getRtpInfo")],-1),wt=t("li",null,[t("p",null,"功能：获取 rtp 代理时的某路 ssrc rtp 信息")],-1),It={href:"http://127.0.0.1/index/api/getRtpInfo?ssrc=1A2B3C4D",target:"_blank",rel:"noopener noreferrer"},Et=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">stream_id</td><td style="text-align:center;">Y</td><td style="text-align:center;">RTP 的 ssrc，16 进制字符串或者是流的 id(openRtpServer 接口指定)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;exist&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> # 是否存在
   <span class="token property">&quot;peer_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;192.168.0.23&quot;</span><span class="token punctuation">,</span> # 推流客户端ip
   <span class="token property">&quot;peer_port&quot;</span> <span class="token operator">:</span> <span class="token number">54000</span> # 客户端端口号
   <span class="token property">&quot;local_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span> #本地监听的网卡ip
   <span class="token property">&quot;local_port&quot;</span> <span class="token operator">:</span> <span class="token number">10000</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),zt=t("h3",{id:"_19、-index-api-getmp4recordfile",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_19、-index-api-getmp4recordfile","aria-hidden":"true"},"#"),n(" 19、"),t("code",null,"/index/api/getMp4RecordFile")],-1),Gt=t("li",null,[t("p",null,"功能：搜索文件系统，获取流对应的录像文件列表或日期文件夹列表")],-1),Ht={href:"http://127.0.0.1/index/api/getMp4RecordFile?vhost=__defaultVhost__&app=live&stream=ss&period=2020-01",target:"_blank",rel:"noopener noreferrer"},Dt=t("code",null,"__defaultVhost__",-1),Wt=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">流的虚拟主机名</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">流的应用名</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流的 ID</td></tr><tr><td style="text-align:center;">period</td><td style="text-align:center;">Y</td><td style="text-align:center;">流的录像日期，格式为 2020-02-01,如果不是完整的日期，那么是搜索录像文件夹列表，否则搜索对应日期下的 mp4 文件列表</td></tr><tr><td style="text-align:center;">customized_path</td><td style="text-align:center;">N</td><td style="text-align:center;">自定义搜索路径，与 startRecord 方法中的 customized_path 一样，默认为配置文件的路径</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code># 搜索文件夹列表(按照前缀匹配规则)：period = <span class="token number">2020</span><span class="token number">-01</span>
<span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;paths&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;2020-01-25&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2020-01-24&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rootPath&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/www/record/live/ss/&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

# 搜索mp4文件列表：period = <span class="token number">2020</span><span class="token number">-01</span><span class="token number">-24</span>
<span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;paths&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
         <span class="token string">&quot;22-20-30.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;22-13-12.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;21-57-07.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;21-19-18.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;21-24-21.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;21-15-10.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;22-14-14.mp4&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rootPath&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/www/live/ss/2020-01-24/&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Ot=t("h3",{id:"_20、-index-api-startrecord",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_20、-index-api-startrecord","aria-hidden":"true"},"#"),n(" 20、"),t("code",null,"/index/api/startRecord")],-1),Ut=t("li",null,[t("p",null,"功能：开始录制 hls 或 MP4")],-1),Kt={href:"http://127.0.0.1/index/api/startRecord?type=1&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},Zt=t("code",null,"__defaultVhost__",-1),Jt=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th><th>类型</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td><td>string</td></tr><tr><td style="text-align:center;">type</td><td style="text-align:center;">Y</td><td style="text-align:center;">0 为 hls，1 为 mp4</td><td>0/1</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<code>__defaultVhost__</code></td><td>string</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td><td>string</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 obs</td><td>string</td></tr><tr><td style="text-align:center;">customized_path</td><td style="text-align:center;">N</td><td style="text-align:center;">录像保存目录</td><td>string</td></tr><tr><td style="text-align:center;">max_second</td><td style="text-align:center;">N</td><td style="text-align:center;">mp4 录像切片时间大小,单位秒，置 0 则采用配置项</td><td>int</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # 成功与否
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Qt=t("h3",{id:"_21、-index-api-stoprecord",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_21、-index-api-stoprecord","aria-hidden":"true"},"#"),n(" 21、"),t("code",null,"/index/api/stopRecord")],-1),Xt=t("li",null,[t("p",null,"功能：停止录制流")],-1),$t={href:"http://127.0.0.1/index/api/stopRecord?type=1&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},tn=t("code",null,"__defaultVhost__",-1),nn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">type</td><td style="text-align:center;">Y</td><td style="text-align:center;">0 为 hls，1 为 mp4</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 obs</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # 成功与否
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),sn=t("h3",{id:"_22、-index-api-isrecording",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_22、-index-api-isrecording","aria-hidden":"true"},"#"),n(" 22、"),t("code",null,"/index/api/isRecording")],-1),en=t("li",null,[t("p",null,"功能：获取流录制状态")],-1),an={href:"http://127.0.0.1/index/api/isRecording?type=1&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},on=t("code",null,"__defaultVhost__",-1),pn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">type</td><td style="text-align:center;">Y</td><td style="text-align:center;">0 为 hls，1 为 mp4</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 obs</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # <span class="token boolean">false</span><span class="token operator">:</span>未录制<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token operator">:</span>正在录制
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),ln=t("h3",{id:"_23、-index-api-getsnap",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_23、-index-api-getsnap","aria-hidden":"true"},"#"),n(" 23、"),t("code",null,"/index/api/getSnap")],-1),rn=t("li",null,[t("p",null,"功能：获取截图或生成实时截图并返回")],-1),cn={href:"http://127.0.0.1/index/api/getSnap?url=rtmp://127.0.0.1/record/robot.mp4&timeout_sec=10&expire_sec=30",target:"_blank",rel:"noopener noreferrer"},dn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">url</td><td style="text-align:center;">Y</td><td style="text-align:center;">需要截图的 url，可以是本机的，也可以是远程主机的</td></tr><tr><td style="text-align:center;">timeout_sec</td><td style="text-align:center;">Y</td><td style="text-align:center;">截图失败超时时间，防止 FFmpeg 一直等待截图</td></tr><tr><td style="text-align:center;">expire_sec</td><td style="text-align:center;">Y</td><td style="text-align:center;">截图的过期时间，该时间内产生的截图都会作为缓存返回</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>jpeg格式的图片，可以在浏览器直接打开
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>`,2),un=t("h3",{id:"_24、-index-api-openrtpserver",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_24、-index-api-openrtpserver","aria-hidden":"true"},"#"),n(" 24、"),t("code",null,"/index/api/openRtpServer")],-1),kn=t("li",null,[t("p",null,"功能：创建 GB28181 RTP 接收端口，如果该端口接收数据超时，则会自动被回收(不用调用 closeRtpServer 接口)")],-1),vn={href:"http://127.0.0.1/index/api/openRtpServer?port=0&tcp_mode=1&stream_id=test",target:"_blank",rel:"noopener noreferrer"},gn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">port</td><td style="text-align:center;">Y</td><td style="text-align:center;">接收端口，0 则为随机端口</td></tr><tr><td style="text-align:center;">tcp_mode</td><td style="text-align:center;">Y</td><td style="text-align:center;">0 udp 模式，1 tcp 被动模式, 2 tcp 主动模式。 (兼容 enable_tcp 为 0/1)</td></tr><tr><td style="text-align:center;">stream_id</td><td style="text-align:center;">Y</td><td style="text-align:center;">该端口绑定的流 ID，该端口只能创建这一个流(而不是根据 ssrc 创建多个)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;port&quot;</span> <span class="token operator">:</span> <span class="token number">55463</span> #接收端口，方便获取随机端口号
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),mn=t("h3",{id:"_25、-index-api-closertpserver",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_25、-index-api-closertpserver","aria-hidden":"true"},"#"),n(" 25、"),t("code",null,"/index/api/closeRtpServer")],-1),hn=t("li",null,[t("p",null,"功能：关闭 GB28181 RTP 接收端口")],-1),bn={href:"http://127.0.0.1/index/api/closeRtpServer?stream_id=test",target:"_blank",rel:"noopener noreferrer"},yn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">stream_id</td><td style="text-align:center;">Y</td><td style="text-align:center;">调用 openRtpServer 接口时提供的流 ID</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;hit&quot;</span><span class="token operator">:</span> <span class="token number">1</span> #是否找到记录并关闭
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),xn=t("h3",{id:"_26、-index-api-listrtpserver",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_26、-index-api-listrtpserver","aria-hidden":"true"},"#"),n(" 26、"),t("code",null,"/index/api/listRtpServer")],-1),qn=t("li",null,[t("p",null,"功能：获取 openRtpServer 接口创建的所有 RTP 服务器")],-1),_n={href:"http://127.0.0.1/index/api/listRtpServer",target:"_blank",rel:"noopener noreferrer"},fn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;port&quot;</span> <span class="token operator">:</span> <span class="token number">52183</span><span class="token punctuation">,</span> #绑定的端口号
         <span class="token property">&quot;stream_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test&quot;</span> #绑定的流ID
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Sn=t("h3",{id:"_27、-index-api-startsendrtp",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_27、-index-api-startsendrtp","aria-hidden":"true"},"#"),n(" 27、"),t("code",null,"/index/api/startSendRtp")],-1),jn=t("li",null,[t("p",null,"功能：作为 GB28181 客户端，启动 ps-rtp 推流，支持 rtp/udp 方式；该接口支持 rtsp/rtmp 等协议转 ps-rtp 推流。第一次推流失败会直接返回错误，成功一次后，后续失败也将无限重试。")],-1),Yn={href:"http://127.0.0.1/index/api/startSendRtp?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost=__defaultVhost__&app=live&stream=test&ssrc=1&dst_url=127.0.0.1&dst_port=10000&is_udp=0",target:"_blank",rel:"noopener noreferrer"},Rn=t("code",null,"__defaultVhost__",-1),Nn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<strong>defaultVhost</strong></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 test</td></tr><tr><td style="text-align:center;">ssrc</td><td style="text-align:center;">Y</td><td style="text-align:center;">推流的 rtp 的 ssrc,指定不同的 ssrc 可以同时推流到多个服务器</td></tr><tr><td style="text-align:center;">dst_url</td><td style="text-align:center;">Y</td><td style="text-align:center;">目标 ip 或域名</td></tr><tr><td style="text-align:center;">dst_port</td><td style="text-align:center;">Y</td><td style="text-align:center;">目标端口</td></tr><tr><td style="text-align:center;">is_udp</td><td style="text-align:center;">Y</td><td style="text-align:center;">是否为 udp 模式,否则为 tcp 模式</td></tr><tr><td style="text-align:center;">src_port</td><td style="text-align:center;">N</td><td style="text-align:center;">使用的本机端口，为 0 或不传时默认为随机端口</td></tr><tr><td style="text-align:center;">pt</td><td style="text-align:center;">N</td><td style="text-align:center;">发送时，rtp 的 pt（uint8_t）,不传时默认为 96</td></tr><tr><td style="text-align:center;">use_ps</td><td style="text-align:center;">N</td><td style="text-align:center;">发送时，rtp 的负载类型。为 1 时，负载为 ps；为 0 时，为 es；不传时默认为 1</td></tr><tr><td style="text-align:center;">only_audio</td><td style="text-align:center;">N</td><td style="text-align:center;">当 use_ps 为 0 时，有效。为 1 时，发送音频；为 0 时，发送视频；不传时默认为 0</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> #成功
   <span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span> <span class="token number">57152</span> #使用的本地端口号
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Pn=t("h4",{id:"_27-1-、-index-api-startsendrtppassive",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_27-1-、-index-api-startsendrtppassive","aria-hidden":"true"},"#"),n(" 27.1 、"),t("code",null,"/index/api/startSendRtpPassive")],-1),Vn=t("li",null,[t("p",null,"功能：作为 GB28181 Passive TCP 服务器；该接口支持 rtsp/rtmp 等协议转 ps-rtp 被动推流。调用该接口，zlm 会启动 tcp 服务器等待连接请求，连接建立后，zlm 会关闭 tcp 服务器，然后源源不断的往客户端推流。第一次推流失败会直接返回错误，成功一次后，后续失败也将无限重试(不停地建立 tcp 监听，超时后再关闭)。")],-1),An={href:"http://127.0.0.1/index/api/startSendRtpPassive?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost=__defaultVhost__&app=live&stream=test&ssrc=1",target:"_blank",rel:"noopener noreferrer"},Mn=t("code",null,"__defaultVhost__",-1),Fn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<strong>defaultVhost</strong></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 test</td></tr><tr><td style="text-align:center;">ssrc</td><td style="text-align:center;">Y</td><td style="text-align:center;">推流的 rtp 的 ssrc,指定不同的 ssrc 可以同时推流到多个服务器</td></tr><tr><td style="text-align:center;">src_port</td><td style="text-align:center;">N</td><td style="text-align:center;">使用的本机端口，为 0 或不传时默认为随机端口</td></tr><tr><td style="text-align:center;">pt</td><td style="text-align:center;">N</td><td style="text-align:center;">发送时，rtp 的 pt（uint8_t）,不传时默认为 96</td></tr><tr><td style="text-align:center;">use_ps</td><td style="text-align:center;">N</td><td style="text-align:center;">发送时，rtp 的负载类型。为 1 时，负载为 ps；为 0 时，为 es；不传时默认为 1</td></tr><tr><td style="text-align:center;">only_audio</td><td style="text-align:center;">N</td><td style="text-align:center;">当 use_ps 为 0 时，有效。为 1 时，发送音频；为 0 时，发送视频；不传时默认为 0</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> #成功
   <span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span> <span class="token number">57152</span> #使用的本地端口号
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Cn=t("h3",{id:"_28、-index-api-stopsendrtp",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_28、-index-api-stopsendrtp","aria-hidden":"true"},"#"),n(" 28、"),t("code",null,"/index/api/stopSendRtp")],-1),Ln=t("li",null,[t("p",null,"功能：停止 GB28181 ps-rtp 推流")],-1),Bn={href:"http://127.0.0.1/index/api/stopSendRtp?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost=__defaultVhost__&app=live&stream=test",target:"_blank",rel:"noopener noreferrer"},Tn=t("code",null,"__defaultVhost__",-1),wn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<strong>defaultVhost</strong></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 test</td></tr><tr><td style="text-align:center;">ssrc</td><td style="text-align:center;">N</td><td style="text-align:center;">根据 ssrc 关停某路 rtp 推流，置空时关闭所有流</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span> #成功
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),In=t("h3",{id:"_29、-index-api-getstatistic",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_29、-index-api-getstatistic","aria-hidden":"true"},"#"),n(" 29、"),t("code",null,"/index/api/getStatistic")],-1),En=t("li",null,[t("p",null,"功能：获取主要对象个数统计，主要用于分析内存性能")],-1),zn={href:"http://127.0.0.1/index/api/getStatistic?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc",target:"_blank",rel:"noopener noreferrer"},Gn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;Buffer&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;BufferLikeString&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;BufferList&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;BufferRaw&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;FrameImp&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;MediaSource&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;MultiMediaSourceMuxer&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Socket&quot;</span><span class="token operator">:</span> <span class="token number">66</span><span class="token punctuation">,</span>
    <span class="token property">&quot;TcpClient&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;TcpServer&quot;</span><span class="token operator">:</span> <span class="token number">64</span><span class="token punctuation">,</span>
    <span class="token property">&quot;TcpSession&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Hn=t("h3",{id:"_30、-index-api-addstreampusherproxy",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_30、-index-api-addstreampusherproxy","aria-hidden":"true"},"#"),n(" 30、"),t("code",null,"/index/api/addStreamPusherProxy")],-1),Dn=t("li",null,[t("p",null,"功能：添加 rtsp/rtmp 主动推流(把本服务器的直播流推送到其他服务器去)")],-1),Wn={href:"http://127.0.0.1/index/api/addStreamProxy?vhost=%60__defaultVhost__%60&app=proxy&stream=test&dst_url=rtmp://127.0.0.1/live/test2",target:"_blank",rel:"noopener noreferrer"},On=t("code",null,"__defaultVhost__",-1),Un=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">添加的流的虚拟主机，例如<code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">协议，例如 rtsp 或 rtmp</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">添加的流的应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">需要转推的流 id</td></tr><tr><td style="text-align:center;">dst_url</td><td style="text-align:center;">Y</td><td style="text-align:center;">目标转推 url，带参数需要自行 url 转义</td></tr><tr><td style="text-align:center;">retry_count</td><td style="text-align:center;">N</td><td style="text-align:center;">转推失败重试次数，默认无限重试</td></tr><tr><td style="text-align:center;">rtp_type</td><td style="text-align:center;">N</td><td style="text-align:center;">rtsp 推流时，推流方式，0：tcp，1：udp</td></tr><tr><td style="text-align:center;">timeout_sec</td><td style="text-align:center;">N</td><td style="text-align:center;">推流超时时间，单位秒，float 类型</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;key&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;rtmp/__defaultVhost__/proxy/test/4AB43C9EABEB76AB443BB8260C8B2D12&quot;</span>  # 流的唯一标识
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Kn=t("h3",{id:"_31、-index-api-delstreampusherproxy-可以使用close-streams接口关闭源直播流也可以停止推流",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_31、-index-api-delstreampusherproxy-可以使用close-streams接口关闭源直播流也可以停止推流","aria-hidden":"true"},"#"),n(" 31、"),t("code",null,"/index/api/delStreamPusherProxy(可以使用close_streams接口关闭源直播流也可以停止推流)")],-1),Zn=t("li",null,[t("p",null,"功能：关闭推流")],-1),Jn={href:"http://127.0.0.1/index/api/delStreamPusherProxy?key=rtmp/__defaultVhost__/proxy/test/4AB43C9EABEB76AB443BB8260C8B2D12",target:"_blank",rel:"noopener noreferrer"},Qn=t("strong",null,"defaultVhost",-1),Xn=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">key</td><td style="text-align:center;">Y</td><td style="text-align:center;">addStreamPusherProxy 接口返回的 key</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;flag&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # 成功与否
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),$n=t("h3",{id:"_32、-index-api-version-获取版本信息",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_32、-index-api-version-获取版本信息","aria-hidden":"true"},"#"),n(" 32、"),t("code",null,"/index/api/version(获取版本信息)")],-1),ts=t("li",null,[t("p",null,"功能：获取版本信息，如分支，commit id, 编译时间")],-1),ns={href:"http://127.0.0.1/index/api/version",target:"_blank",rel:"noopener noreferrer"},ss=a(`<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr></tbody></table></li><li><p>响应：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;branchName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;master&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;buildTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-04-19T10:34:34&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;commitHash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f143898&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),es=t("h3",{id:"_33、-index-api-getmediaplayerlist",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_33、-index-api-getmediaplayerlist","aria-hidden":"true"},"#"),n(" 33、"),t("code",null,"/index/api/getMediaPlayerList")],-1),as=t("li",null,[t("p",null,"功能：获取某个流观看者列表")],-1),os={href:"http://127.0.0.1:8080/index/api/getMediaPlayerList?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&schema=rtsp&vhost=__defaultVhost__&app=live&stream=test'",target:"_blank",rel:"noopener noreferrer"},ps=t("strong",null,"defaultVhost",-1),ls=a('<li><p>参数：</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">是否必选</th><th style="text-align:center;">释意</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">api 操作密钥(配置文件配置)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">协议，例如 rtsp 或 rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">虚拟主机，例如<code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">应用名，例如 live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">流 id，例如 obs</td></tr></tbody></table></li><li><p>响应：</p></li>',2),is=a(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3-309&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;local_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;::&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
      <span class="token property">&quot;peer_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;172.18.190.159&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;peer_port&quot;</span><span class="token operator">:</span> <span class="token number">52996</span><span class="token punctuation">,</span>
      <span class="token property">&quot;typeid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mediakit::WebRtcSession&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function rs(cs,ds){const s=p("ExternalLinkIcon");return l(),i("div",null,[c,t("p",null,[t("a",d,[n("postman 配置文件"),e(s)])]),t("p",null,[n("由于接口更新频繁，在观看本文档的同时，请大家再使用 postman 核对测试接口，同时本文档可能有些接口有遗漏，你也可以参考"),t("a",u,[n("代码"),e(s)])]),k,t("ul",null,[v,t("li",null,[t("p",null,[n("范例："),t("a",g,[n("http://127.0.0.1/index/api/getApiList"),e(s)])])]),m]),h,t("ul",null,[b,t("li",null,[t("p",null,[n("范例："),t("a",y,[n("http://127.0.0.1/index/api/getThreadsLoad"),e(s)])])]),x]),q,t("ul",null,[_,t("li",null,[t("p",null,[n("范例："),t("a",f,[n("http://127.0.0.1/index/api/getWorkThreadsLoad"),e(s)])])]),S]),j,t("ul",null,[Y,t("li",null,[t("p",null,[n("范例："),t("a",R,[n("http://127.0.0.1/index/api/getServerConfig"),e(s)])])]),N]),P,t("ul",null,[V,t("li",null,[t("p",null,[n("范例："),t("a",A,[n("http://127.0.0.1/index/api/setServerConfig?api.apiDebug=0(例如关闭 http api 调试)"),e(s)])])]),M]),F,t("ul",null,[C,t("li",null,[t("p",null,[n("范例："),t("a",L,[n("http://127.0.0.1/index/api/restartServer"),e(s)])])]),B]),T,t("ul",null,[w,t("li",null,[t("p",null,[n("范例："),t("a",I,[n("http://127.0.0.1/index/api/getMediaList"),e(s)])])]),E]),z,t("ul",null,[G,t("li",null,[t("p",null,[n("范例："),t("a",H,[n("http://127.0.0.1/index/api/close_stream?schema=rtmp&vhost="),D,n("&app=live&stream=0&force=1"),e(s)])])]),W]),O,t("ul",null,[U,t("li",null,[t("p",null,[n("范例："),t("a",K,[n("http://127.0.0.1/index/api/close_streams?schema=rtmp&vhost="),Z,n("&app=live&stream=0&force=1"),e(s)])])]),J]),Q,t("ul",null,[X,t("li",null,[t("p",null,[n("范例："),t("a",$,[n("http://127.0.0.1/index/api/getAllSession"),e(s)])])]),tt]),nt,t("ul",null,[st,t("li",null,[t("p",null,[n("范例："),t("a",et,[n("http://127.0.0.1/index/api/kick_session?id=140614440178720"),e(s)])])]),at]),ot,t("ul",null,[pt,t("li",null,[t("p",null,[n("范例："),t("a",lt,[n("http://127.0.0.1/index/api/kick_sessions?local_port=554"),e(s)])])]),it]),rt,t("ul",null,[ct,t("li",null,[t("p",null,[n("范例："),t("a",dt,[n("http://127.0.0.1/index/api/addStreamProxy?vhost="),ut,n("&app=proxy&stream=0&url=rtmp://live.hkstv.hk.lxdns.com/live/hks2"),e(s)])])]),kt]),vt,t("ul",null,[gt,t("li",null,[t("p",null,[n("范例："),t("a",mt,[n("http://127.0.0.1/index/api/delStreamProxy?key="),ht,n("/proxy/0"),e(s)])])]),bt]),yt,t("ul",null,[xt,t("li",null,[t("p",null,[n("范例："),t("a",qt,[n("http://127.0.0.1/index/api/addFFmpegSource?src_url=http://live.hkstv.hk.lxdns.com/live/hks2/playlist.m3u8&dst_url=rtmp://127.0.0.1/live/hks2&timeout_ms=10000&ffmpeg_cmd_key=ffmpeg.cmd"),e(s)])])]),_t]),ft,t("ul",null,[St,t("li",null,[t("p",null,[n("范例："),t("a",jt,[n("http://127.0.0.1/index/api/delFFmpegSource?key=5f748d2ef9712e4b2f6f970c1d44d93a"),e(s)])])]),Yt]),Rt,t("ul",null,[Nt,t("li",null,[t("p",null,[n("范例："),t("a",Pt,[n("http://127.0.0.1/index/api/isMediaOnline?schema=rtsp&vhost="),Vt,n("&app=live&stream=obs"),e(s)])])]),At]),Mt,t("ul",null,[Ft,t("li",null,[t("p",null,[n("范例："),t("a",Ct,[n("http://127.0.0.1/index/api/getMediaInfo?schema=rtsp&vhost="),Lt,n("&app=live&stream=obs"),e(s)])])]),Bt]),Tt,t("ul",null,[wt,t("li",null,[t("p",null,[n("范例："),t("a",It,[n("http://127.0.0.1/index/api/getRtpInfo?stream_id=1A2B3C4D"),e(s)])])]),Et]),zt,t("ul",null,[Gt,t("li",null,[t("p",null,[n("范例："),t("a",Ht,[n("http://127.0.0.1/index/api/getMp4RecordFile?vhost="),Dt,n("&app=live&stream=ss&period=2020-01"),e(s)])])]),Wt]),Ot,t("ul",null,[Ut,t("li",null,[t("p",null,[n("范例："),t("a",Kt,[n("http://127.0.0.1/index/api/startRecord?type=1&vhost="),Zt,n("&app=live&stream=obs"),e(s)])])]),Jt]),Qt,t("ul",null,[Xt,t("li",null,[t("p",null,[n("范例："),t("a",$t,[n("http://127.0.0.1/index/api/stopRecord?type=1&vhost="),tn,n("&app=live&stream=obs"),e(s)])])]),nn]),sn,t("ul",null,[en,t("li",null,[t("p",null,[n("范例："),t("a",an,[n("http://127.0.0.1/index/api/isRecording?type=1&vhost="),on,n("&app=live&stream=obs"),e(s)])])]),pn]),ln,t("ul",null,[rn,t("li",null,[t("p",null,[n("范例："),t("a",cn,[n("http://127.0.0.1/index/api/getSnap?url=rtmp://127.0.0.1/record/robot.mp4&timeout_sec=10&expire_sec=30"),e(s)])])]),dn]),un,t("ul",null,[kn,t("li",null,[t("p",null,[n("范例："),t("a",vn,[n("http://127.0.0.1/index/api/openRtpServer?port=0&tcp_mode=1&stream_id=test"),e(s)])])]),gn]),mn,t("ul",null,[hn,t("li",null,[t("p",null,[n("范例："),t("a",bn,[n("http://127.0.0.1/index/api/closeRtpServer?stream_id=test"),e(s)])])]),yn]),xn,t("ul",null,[qn,t("li",null,[t("p",null,[n("范例："),t("a",_n,[n("http://127.0.0.1/index/api/listRtpServer"),e(s)])])]),fn]),Sn,t("ul",null,[jn,t("li",null,[t("p",null,[n("范例："),t("a",Yn,[n("http://127.0.0.1/index/api/startSendRtp?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost="),Rn,n("&app=live&stream=test&ssrc=1&dst_url=127.0.0.1&dst_port=10000&is_udp=0"),e(s)])])]),Nn]),Pn,t("ul",null,[Vn,t("li",null,[t("p",null,[n("范例："),t("a",An,[n("http://127.0.0.1/index/api/startSendRtpPassive?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost="),Mn,n("&app=live&stream=test&ssrc=1"),e(s)])])]),Fn]),Cn,t("ul",null,[Ln,t("li",null,[t("p",null,[n("范例："),t("a",Bn,[n("http://127.0.0.1/index/api/stopSendRtp?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost="),Tn,n("&app=live&stream=test"),e(s)])])]),wn]),In,t("ul",null,[En,t("li",null,[t("p",null,[n("范例："),t("a",zn,[n("http://127.0.0.1/index/api/getStatistic?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc"),e(s)])])]),Gn]),Hn,t("ul",null,[Dn,t("li",null,[t("p",null,[n("范例："),t("a",Wn,[n("http://127.0.0.1/index/api/addStreamPusherProxy?vhost="),On,n("&app=proxy&stream=test&dst_url=rtmp://127.0.0.1/live/test2"),e(s)])])]),Un]),Kn,t("ul",null,[Zn,t("li",null,[t("p",null,[n("范例："),t("a",Jn,[n("http://127.0.0.1/index/api/delStreamPusherProxy?key=rtmp/"),Qn,n("/proxy/test/4AB43C9EABEB76AB443BB8260C8B2D12"),e(s)])])]),Xn]),$n,t("ul",null,[ts,t("li",null,[t("p",null,[n("范例："),t("a",ns,[n("http://127.0.0.1/index/api/version"),e(s)])])]),ss]),es,t("ul",null,[as,t("li",null,[t("p",null,[n("范例："),t("a",os,[n("http://127.0.0.1:8080/index/api/getMediaPlayerList?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&schema=rtsp&vhost="),ps,n("&app=live&stream=test'"),e(s)])])]),ls]),is])}const vs=o(r,[["render",rs],["__file","restful_api.html.vue"]]);export{vs as default};
