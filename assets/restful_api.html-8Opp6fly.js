import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as p,c as i,a as t,d as e,b as s,e as a}from"./app-BTtFj0bM.js";const r={},c=t("h2",{id:"download-postman-configuration-file-to-test-restful-api",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#download-postman-configuration-file-to-test-restful-api","aria-hidden":"true"},"#"),e(" Download postman configuration file (to test RESTful API)")],-1),d={href:"https://github.com/xia-chu/ZLMediaKit/tree/master/postman",target:"_blank",rel:"noopener noreferrer"},u={href:"https://github.com/xia-chu/ZLMediaKit/blob/master/server/WebApi.cpp#L261",target:"_blank",rel:"noopener noreferrer"},k=a(`<h2 id="api-preview" tabindex="-1"><a class="header-anchor" href="#api-preview" aria-hidden="true">#</a> API Preview</h2><p>MediaServer is the main process of ZLMediaKit and currently supports the following HTTP API endpoints. All these endpoints support both GET and POST methods.</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code>      &quot;/index/api/addFFmpegSource&quot;,
      &quot;/index/api/addStreamProxy&quot;,
      &quot;/index/api/close_stream&quot;,
      &quot;/index/api/close_streams&quot;,
      &quot;/index/api/delFFmpegSource&quot;,
      &quot;/index/api/delStreamProxy&quot;,
      &quot;/index/api/getAllSession&quot;,
      &quot;/index/api/getApiList&quot;,
      &quot;/index/api/getMediaList&quot;,
      &quot;/index/api/getServerConfig&quot;,
      &quot;/index/api/getThreadsLoad&quot;,
      &quot;/index/api/getWorkThreadsLoad&quot;,
      &quot;/index/api/kick_session&quot;,
      &quot;/index/api/kick_sessions&quot;,
      &quot;/index/api/restartServer&quot;,
      &quot;/index/api/setServerConfig&quot;,
      &quot;/index/api/isMediaOnline&quot;,
      &quot;/index/api/getMediaInfo&quot;,
      &quot;/index/api/getRtpInfo&quot;,
      &quot;/index/api/getMp4RecordFile&quot;,
      &quot;/index/api/startRecord&quot;,
      &quot;/index/api/stopRecord&quot;,
      &quot;/index/api/getRecordStatus&quot;,
      &quot;/index/api/getSnap&quot;,
      &quot;/index/api/openRtpServer&quot;,
      &quot;/index/api/closeRtpServer&quot;,
      &quot;/index/api/listRtpServer&quot;,
      &quot;/index/api/startSendRtp&quot;,
      &quot;/index/api/stopSendRtp&quot;,
      &quot;/index/api/getStatistic&quot;,
      &quot;/index/api/addStreamPusherProxy&quot;,
      &quot;/index/api/delStreamPusherProxy&quot;,
      &quot;/index/api/version&quot;,
      &quot;/index/api/getMediaPlayerList&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For the POST method, parameters can be sent in either urlencoded or JSON format. To authenticate these API operations, the <code>secret</code> parameter needs to be provided. However, if the operation is performed from the IP address 127.0.0.1, authentication is not required.</p><h2 id="api-response-conventions" tabindex="-1"><a class="header-anchor" href="#api-response-conventions" aria-hidden="true">#</a> API Response Conventions</h2><ul><li>At the HTTP level, a unified 200 status code is returned, and the response body is always in JSON format.</li><li>The response body generally follows the following format:</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">-1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Failure message&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>The <code>code</code> field represents the execution result and can have the following values:</li></ul><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token punctuation">{</span>
    Exception <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token comment">// Exception in the code</span>
    InvalidArgs <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token comment">// Invalid parameters</span>
    SqlFailed <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">// SQL execution failed</span>
    AuthFailed <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// Authentication failed</span>
    OtherFailed <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// Business code execution failed</span>
    Success <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// Execution successful</span>
<span class="token punctuation">}</span> ApiErr<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>If the execution is successful, <code>code == 0</code>, and there is usually no <code>msg</code> field.</p></li><li><p>When <code>code == -1</code>, it indicates that the business code execution was unsuccessful. More specific reasons are usually provided in the <code>result</code> field, as shown below:</p></li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">-1</span><span class="token punctuation">,</span> <span class="token comment">// Business code execution failed</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;can not find the stream&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Failure message</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token number">-2</span> <span class="token comment">// Specific reason for business code execution failure</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Developers generally only need to pay attention to the <code>code</code> and <code>msg</code> fields. If <code>code != 0</code>, printing the <code>msg</code> field is sufficient.</p></li><li><p>When <code>code == 0</code>, it represents complete success. If data is returned, it is usually provided in the <code>data</code> field.</p></li></ul><h2 id="api-details" tabindex="-1"><a class="header-anchor" href="#api-details" aria-hidden="true">#</a> API Details</h2><h3 id="_0-index-api-getapilist" tabindex="-1"><a class="header-anchor" href="#_0-index-api-getapilist" aria-hidden="true">#</a> 0. <code>/index/api/getApiList</code></h3>`,14),m=t("li",null,[t("p",null,"Function: Get the list of APIs.")],-1),h={href:"http://127.0.0.1/index/api/getApiList",target:"_blank",rel:"noopener noreferrer"},g=a(`<li><p>Parameters:None</p></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;/index/&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/addFFmpegSource&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/addStreamProxy&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/addStreamPusherProxy&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/closeRtpServer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/close_stream&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/delFFmpegSource&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/delStreamProxy&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/delStreamPusherProxy&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/downloadBin&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getAllSession&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getApiList&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getMediaInfo&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getMediaList&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getMp4RecordFile&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getRtpInfo&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getServerConfig&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getSnap&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getStatistic&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getThreadsLoad&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/getWorkThreadsLoad&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/isMediaOnline&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/isRecording&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/kick_session&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/kick_sessions&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/listRtpServer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/openRtpServer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/pauseRtpCheck&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/restartServer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/resumeRtpCheck&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/setServerConfig&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/startRecord&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/startSendRtp&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/stopRecord&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/stopSendRtp&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/version&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/api/webrtc&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_flow_report&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_http_access&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_play&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_publish&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_record_hls&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_record_mp4&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_rtsp_auth&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_rtsp_realm&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_server_started&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_shell_login&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_stream_changed&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_stream_none_reader&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_stream_not_found&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;/index/hook/on_stream_not_found_ffmpeg&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),v=t("h3",{id:"_1-index-api-getthreadsload",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_1-index-api-getthreadsload","aria-hidden":"true"},"#"),e(" 1. "),t("code",null,"/index/api/getThreadsLoad")],-1),y=t("li",null,[t("p",null,"Function: Get the load and delay of each epoll (or select) thread.")],-1),b={href:"http://127.0.0.1/index/api/getThreadsLoad",target:"_blank",rel:"noopener noreferrer"},x=a(`<li><p>Parameters: None</p></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;delay&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// Delay of the thread</span>
      <span class="token property">&quot;load&quot;</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// Load of the thread, ranging from 0 to 100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;delay&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;load&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),q=t("h3",{id:"_2-index-api-getworkthreadsload",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_2-index-api-getworkthreadsload","aria-hidden":"true"},"#"),e(" 2. "),t("code",null,"/index/api/getWorkThreadsLoad")],-1),_=t("li",null,[t("p",null,"Function: Get the load and delay of each background epoll (or select) thread.")],-1),f={href:"http://127.0.0.1/index/api/getWorkThreadsLoad",target:"_blank",rel:"noopener noreferrer"},P=a(`<li><p>Parameters: None</p></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;delay&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// Delay of the thread</span>
      <span class="token property">&quot;load&quot;</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// Load of the thread, ranging from 0 to 100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;delay&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;load&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),S=t("h3",{id:"_3-index-api-getserverconfig",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_3-index-api-getserverconfig","aria-hidden":"true"},"#"),e(" 3. "),t("code",null,"/index/api/getServerConfig")],-1),R=t("li",null,[t("p",null,"Function: Get server configuration.")],-1),A={href:"http://127.0.0.1/index/api/getServerConfig",target:"_blank",rel:"noopener noreferrer"},T=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in the file)</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;api.apiDebug&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;api.secret&quot;</span><span class="token operator">:</span> <span class="token string">&quot;035c73f7-bb6b-4889-a715-d9eb2d1925cc&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ffmpeg.bin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/usr/local/bin/ffmpeg&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ffmpeg.cmd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;%s -i %s -c:a aac -strict -2 -ar 44100 -ab 48k -c:v libx264 -f flv %s&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ffmpeg.log&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/xzl/git/ZLMediaKit/cmake-build-debug/bin/ffmpeg/ffmpeg.log&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;general.enableVhost&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;general.flowThreshold&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1024&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;general.maxStreamWaitMS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;general.streamNoneReaderDelayMS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hls.fileBufSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;65536&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hls.filePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/xzl/git/ZLMediaKit/cmake-build-debug/bin/httpRoot&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hls.segDur&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hls.segNum&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.access_file_except_hls&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.admin_params&quot;</span><span class="token operator">:</span> <span class="token string">&quot;secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.enable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_flow_report&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_flow_report&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_http_access&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_http_access&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_play&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_play&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_publish&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_publish&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_record_mp4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_record_mp4&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_rtsp_auth&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_rtsp_auth&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_rtsp_realm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_rtsp_realm&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_shell_login&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_shell_login&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_stream_changed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_stream_changed&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_stream_none_reader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_stream_none_reader&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.on_stream_not_found&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://127.0.0.1/index/hook/on_stream_not_found&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hook.timeoutSec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.charSet&quot;</span><span class="token operator">:</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.keepAliveSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.maxReqCount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.maxReqSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4096&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.notFound&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor=\\&quot;white\\&quot;&gt;&lt;center&gt;&lt;h1&gt;您访问的资源不存在！&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;ZLMediaKit-4.0&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;80&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.rootPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/xzl/git/ZLMediaKit/cmake-build-debug/bin/httpRoot&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.sendBufSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;65536&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;http.sslport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;443&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;multicast.addrMax&quot;</span><span class="token operator">:</span> <span class="token string">&quot;239.255.255.255&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;multicast.addrMin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;239.0.0.0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;multicast.udpTTL&quot;</span><span class="token operator">:</span> <span class="token string">&quot;64&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;record.appName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;record.filePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/Users/xzl/git/ZLMediaKit/cmake-build-debug/bin/httpRoot&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;record.fileSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3600&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;record.sampleMS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtmp.handshakeSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtmp.keepAliveSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtmp.modifyStamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtmp.port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1935&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.audioMtuSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;600&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.clearCount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.cycleMS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;46800000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.maxRtpCount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtp.videoMtuSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1400&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.authBasic&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.handshakeSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.keepAliveSecond&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;554&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rtsp.sslport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;322&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;shell.maxReqSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1024&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;shell.port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9000&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),j=t("h3",{id:"_4-index-api-setserverconfig",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_4-index-api-setserverconfig","aria-hidden":"true"},"#"),e(" 4. "),t("code",null,"/index/api/setServerConfig")],-1),w=t("li",null,[t("p",null,"Function: Set server configuration.")],-1),Y={href:"http://127.0.0.1/index/api/setServerConfig?api.apiDebug=0",target:"_blank",rel:"noopener noreferrer"},I=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in the file)</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;changed&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// Number of configuration items changed</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// 0 represents success</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),F=t("h3",{id:"_5-index-api-restartserver",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_5-index-api-restartserver","aria-hidden":"true"},"#"),e(" 5. "),t("code",null,"/index/api/restartServer")],-1),D=t("li",null,[t("p",null,"Function:Restart the server. Only possible in Daemon mode, otherwise it will be shut down directly!")],-1),C={href:"http://127.0.0.1/index/api/restartServer",target:"_blank",rel:"noopener noreferrer"},V=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in the file)</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The server will automatically restart in one second.&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),N=t("h3",{id:"_6-index-api-getmedialist",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_6-index-api-getmedialist","aria-hidden":"true"},"#"),e(" 6. "),t("code",null,"/index/api/getMediaList")],-1),M=t("li",null,[t("p",null,"Function:Get the list of streams, with optional filtering parameters.")],-1),E={href:"http://127.0.0.1/index/api/getMediaList",target:"_blank",rel:"noopener noreferrer"},L=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in the file)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">N</td><td style="text-align:center;">Filter by protocol, e.g., rtsp or rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">N</td><td style="text-align:center;">Filter by virtual host, e.g., <code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">N</td><td style="text-align:center;">Filter by application name, e.g., live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">N</td><td style="text-align:center;">Filter by stream ID, e.g., test</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
     <span class="token property">&quot;app&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;live&quot;</span><span class="token punctuation">,</span>  # Application name
     <span class="token property">&quot;readerCount&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Number of viewers for this protocol
     <span class="token property">&quot;totalReaderCount&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Total number of viewers<span class="token punctuation">,</span> including hls/rtsp/rtmp/http-flv/ws-flv
     <span class="token property">&quot;schema&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;rtsp&quot;</span><span class="token punctuation">,</span> # Protocol
     <span class="token property">&quot;stream&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;obs&quot;</span><span class="token punctuation">,</span> # Stream ID
     <span class="token property">&quot;originSock&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  # Client and server network information<span class="token punctuation">,</span> may be <span class="token null keyword">null</span>
            <span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;140241931428384&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;local_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span> <span class="token number">1935</span><span class="token punctuation">,</span>
            <span class="token property">&quot;peer_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;peer_port&quot;</span><span class="token operator">:</span> <span class="token number">50097</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token property">&quot;originType&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # Source type<span class="token operator">:</span> unknown = <span class="token number">0</span><span class="token punctuation">,</span> rtmp_push = <span class="token number">1</span><span class="token punctuation">,</span> rtsp_push = <span class="token number">2</span><span class="token punctuation">,</span> rtp_push = <span class="token number">3</span><span class="token punctuation">,</span> pull = <span class="token number">4</span><span class="token punctuation">,</span> ffmpeg_pull = <span class="token number">5</span><span class="token punctuation">,</span> mp4_vod = <span class="token number">6</span><span class="token punctuation">,</span> device_chn = <span class="token number">7</span>
     <span class="token property">&quot;originTypeStr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MediaOriginType::rtmp_push&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;originUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rtmp://127.0.0.1:1935/live/hks2&quot;</span><span class="token punctuation">,</span> # URL of the source
     <span class="token property">&quot;createStamp&quot;</span><span class="token operator">:</span> <span class="token number">1602205811</span><span class="token punctuation">,</span> # GMT Unix system timestamp in seconds
     <span class="token property">&quot;aliveSecond&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> # The time the stream remains alive<span class="token punctuation">,</span> in seconds
     <span class="token property">&quot;bytesSpeed&quot;</span><span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span> # Data generation speed in bytes/s
     <span class="token property">&quot;tracks&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>    # Audio and video tracks
        <span class="token punctuation">{</span>
           <span class="token property">&quot;channels&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # Number of audio channels
           <span class="token property">&quot;codec_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> # H264 = <span class="token number">0</span><span class="token punctuation">,</span> H265 = <span class="token number">1</span><span class="token punctuation">,</span> AAC = <span class="token number">2</span><span class="token punctuation">,</span> G711A = <span class="token number">3</span><span class="token punctuation">,</span> G711U = <span class="token number">4</span>
           <span class="token property">&quot;codec_id_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CodecAAC&quot;</span><span class="token punctuation">,</span> # Codec type name
           <span class="token property">&quot;codec_type&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # Video = <span class="token number">0</span><span class="token punctuation">,</span> Audio = <span class="token number">1</span>
           <span class="token property">&quot;ready&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> # Whether the track is ready
           <span class="token property">&quot;frames&quot;</span> <span class="token operator">:</span> <span class="token number">1119</span><span class="token punctuation">,</span> # Accumulated received frames
           <span class="token property">&quot;sample_bit&quot;</span> <span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> # Audio sample bit depth
           <span class="token property">&quot;sample_rate&quot;</span> <span class="token operator">:</span> <span class="token number">8000</span> # Audio sample rate
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
           <span class="token property">&quot;codec_id&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # H264 = <span class="token number">0</span><span class="token punctuation">,</span> H265 = <span class="token number">1</span><span class="token punctuation">,</span> AAC = <span class="token number">2</span><span class="token punctuation">,</span> G711A = <span class="token number">3</span><span class="token punctuation">,</span> G711U = <span class="token number">4</span>
           <span class="token property">&quot;codec_id_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CodecH264&quot;</span><span class="token punctuation">,</span> #  Codec type name
           <span class="token property">&quot;codec_type&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Video = <span class="token number">0</span><span class="token punctuation">,</span> Audio = <span class="token number">1</span>
           <span class="token property">&quot;fps&quot;</span> <span class="token operator">:</span> <span class="token number">59</span><span class="token punctuation">,</span>  # Video frames per second
           <span class="token property">&quot;frames&quot;</span> <span class="token operator">:</span> <span class="token number">1119</span><span class="token punctuation">,</span> # Accumulated received frames<span class="token punctuation">,</span> excluding sei/aud/sps/pps frames that cannot be decoded
           <span class="token property">&quot;gop_interval_ms&quot;</span> <span class="token operator">:</span> <span class="token number">1993</span><span class="token punctuation">,</span> # GOP interval in milliseconds
           <span class="token property">&quot;gop_size&quot;</span> <span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> # gop size<span class="token punctuation">,</span> unit number of frames
           <span class="token property">&quot;key_frames&quot;</span> <span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span> # Accumulated received key frames
           <span class="token property">&quot;height&quot;</span> <span class="token operator">:</span> <span class="token number">720</span><span class="token punctuation">,</span> # video high
           <span class="token property">&quot;ready&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  # Is the track ready?
           <span class="token property">&quot;width&quot;</span> <span class="token operator">:</span> <span class="token number">1280</span> # video width
        <span class="token punctuation">}</span>
     <span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token property">&quot;vhost&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;__defaultVhost__&quot;</span> # Virtual host name
   <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),W=t("h3",{id:"_7-index-api-close-stream-deprecated-please-use-the-close-streams-api-instead",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_7-index-api-close-stream-deprecated-please-use-the-close-streams-api-instead","aria-hidden":"true"},"#"),e(" 7. "),t("code",null,"/index/api/close_stream"),e("(Deprecated, please use the "),t("code",null,"close_streams"),e(" API instead)")],-1),B=t("li",null,[t("p",null,"Function: Close a stream (supports closing streams of all types).")],-1),G={href:"http://127.0.0.1/index/api/close_stream?schema=rtmp&vhost=__defaultVhost__&app=live&stream=0&force=1",target:"_blank",rel:"noopener noreferrer"},H=t("code",null,"__defaultVhost__",-1),U=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the file)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">Protocol, e.g., rtsp or rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, e.g., <code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, e.g., live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, e.g., test</td></tr><tr><td style="text-align:center;">force</td><td style="text-align:center;">N</td><td style="text-align:center;">Whether to force close (even if someone is watching)</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  # <span class="token number">0</span><span class="token operator">:</span> success<span class="token punctuation">,</span> <span class="token number">-1</span><span class="token operator">:</span> failed to close<span class="token punctuation">,</span> <span class="token number">-2</span><span class="token operator">:</span> stream does not exist
   <span class="token property">&quot;msg&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),z=t("h3",{id:"_8-index-api-close-streams",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_8-index-api-close-streams","aria-hidden":"true"},"#"),e(" 8. "),t("code",null,"/index/api/close_streams")],-1),O=t("li",null,[t("p",null,"Function: Close a stream (supports closing streams of all types).")],-1),K={href:"http://127.0.0.1/index/api/close_streams?schema=rtmp&vhost=__defaultVhost__&app=live&stream=0&force=1",target:"_blank",rel:"noopener noreferrer"},Z=t("code",null,"__defaultVhost__",-1),J=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the file)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">N</td><td style="text-align:center;">Protocol, e.g., rtsp or rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">N</td><td style="text-align:center;">Virtual host, e.g., <code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">N</td><td style="text-align:center;">Application name, e.g., live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">N</td><td style="text-align:center;">Stream ID, e.g., test</td></tr><tr><td style="text-align:center;">force</td><td style="text-align:center;">N</td><td style="text-align:center;">Whether to force close (even if someone is watching)</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;count_hit&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  # Number of streams hit by the filter
   <span class="token property">&quot;count_closed&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> # Number of streams closed<span class="token punctuation">,</span> which may be less than count_hit
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Q=t("h3",{id:"_9-index-api-getallsession",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_9-index-api-getallsession","aria-hidden":"true"},"#"),e(" 9. "),t("code",null,"/index/api/getAllSession")],-1),X=t("li",null,[t("p",null,"Function: Get a list of all TcpSessions (retrieve information about all TCP clients).")],-1),$={href:"http://127.0.0.1/index/api/getAllSession",target:"_blank",rel:"noopener noreferrer"},tt=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the file)</td></tr><tr><td style="text-align:center;">local_port</td><td style="text-align:center;">N</td><td style="text-align:center;">Filter by local port, e.g., 554</td></tr><tr><td style="text-align:center;">peer_ip</td><td style="text-align:center;">N</td><td style="text-align:center;">Filter by client IP</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;140614477848784&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;local_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;local_port&quot;</span> <span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
         <span class="token property">&quot;peer_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;peer_port&quot;</span> <span class="token operator">:</span> <span class="token number">51136</span><span class="token punctuation">,</span>
         <span class="token property">&quot;typeid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;16WebSocketSessionI11EchoSessionN8mediakit11HttpSessionEE&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;140614443300192&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;local_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;local_port&quot;</span> <span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
         <span class="token property">&quot;peer_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
         <span class="token property">&quot;peer_port&quot;</span> <span class="token operator">:</span> <span class="token number">51135</span><span class="token punctuation">,</span>
         <span class="token property">&quot;typeid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;16WebSocketSessionI11EchoSessionN8mediakit11HttpSessionEE&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;140614440178720&quot;</span><span class="token punctuation">,</span>  # Unique ID for this TCP connection
         <span class="token property">&quot;local_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>  # Local IP address
         <span class="token property">&quot;local_port&quot;</span> <span class="token operator">:</span> <span class="token number">1935</span><span class="token punctuation">,</span>       # Local port number (this is an RTMP player or publisher)
         <span class="token property">&quot;peer_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>   # Client IP address
         <span class="token property">&quot;peer_port&quot;</span> <span class="token operator">:</span> <span class="token number">51130</span><span class="token punctuation">,</span>       # Client port number
         <span class="token property">&quot;typeid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;N8mediakit11RtmpSessionE&quot;</span>  # Client TCPSession typeid
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),et=t("h3",{id:"_10-index-api-kick-session",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_10-index-api-kick-session","aria-hidden":"true"},"#"),e(" 10. "),t("code",null,"/index/api/kick_session")],-1),nt=t("li",null,[t("p",null,"Function: Disconnects a TCP connection, such as an RTSP or RTMP player.")],-1),st={href:"http://127.0.0.1/index/api/kick_session?id=140614440178720",target:"_blank",rel:"noopener noreferrer"},at=t("li",null,[t("p",null,"Parameters:")],-1),ot=a(`<table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in the configuration file)</td></tr><tr><td style="text-align:center;">Id</td><td style="text-align:center;">Y</td><td style="text-align:center;">Unique client ID, which can be obtained through the <code>getAllSession</code> interface</td></tr></tbody></table><ul><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_11-index-api-kick-sessions" tabindex="-1"><a class="header-anchor" href="#_11-index-api-kick-sessions" aria-hidden="true">#</a> 11. <code>/index/api/kick_sessions</code></h3>`,3),lt=t("li",null,[t("p",null,"Function: Disconnects TCP connections, such as RTSP or RTMP players.")],-1),pt={href:"http://127.0.0.1/index/api/kick_sessions?local_port=554",target:"_blank",rel:"noopener noreferrer"},it=t("li",null,[t("p",null,"Parameters:")],-1),rt=a(`<table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in the configuration file)</td></tr><tr><td style="text-align:center;">local_port</td><td style="text-align:center;">N</td><td style="text-align:center;">Filters local ports, for example, filtering RTSP connections: 554</td></tr><tr><td style="text-align:center;">peer_ip</td><td style="text-align:center;">N</td><td style="text-align:center;">Filters client IP</td></tr></tbody></table><ul><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;count_hit&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span># Number of matched clients
   <span class="token property">&quot;msg&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_12-index-api-addstreamproxy" tabindex="-1"><a class="header-anchor" href="#_12-index-api-addstreamproxy" aria-hidden="true">#</a> 12. <code>/index/api/addStreamProxy</code></h3><p>Function: Dynamically add RTSP/RTMP/HLS/HTTP-TS/HTTP-FLV pull streaming proxies (only supports H264/H265/AAC/G711/Opus payloads).</p>`,4),ct={href:"http://127.0.0.1/index/api/addStreamProxy?vhost=__defaultVhost__&app=proxy&stream=0&url=rtmp://live.hkstv.hk.lxdns.com/live/hks2",target:"_blank",rel:"noopener noreferrer"},dt=t("code",null,"__defaultVhost__",-1),ut=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Type</th><th style="text-align:center;">Description</th><th style="text-align:center;">Required</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">API operation key (configured)</td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">Virtual host of the added stream (e.g., <code>__defaultVhost__</code>)</td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">Application name of the added stream (e.g., live)</td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">ID of the added stream (e.g., test)</td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">url</td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">Stream URL for pulling (e.g., rtmp://live.hkstv.hk.lxdns.com/live/hks2)</td><td style="text-align:center;">Y</td></tr><tr><td style="text-align:center;">retry_count</td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">Number of pull retry attempts, default is -1 for unlimited retries</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;">rtp_type</td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">RTP pulling type for RTSP streams: 0: TCP, 1: UDP, 2: Multicast</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;">timeout_sec</td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">Pulling timeout in seconds, float type</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_hls</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to convert to HLS-MPEGTS protocol</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_hls_fmp4</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to convert to HLS-FMP4 protocol</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_mp4</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to enable MP4 recording</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_rtsp</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to convert to RTSP protocol</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_rtmp</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to convert to RTMP/FLV protocol</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_ts</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to convert to HTTP-TS/WS-TS protocol</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_fmp4</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to convert to HTTP-FMP4/WS-FMP4 protocol</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>hls_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether the protocol generates only if someone is watching</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>rtsp_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether the protocol generates only if someone is watching</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>rtmp_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether the protocol generates only if someone is watching</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>ts_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether the protocol generates only if someone is watching</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>fmp4_demand</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether the protocol generates only if someone is watching</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>enable_audio</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to enable audio when converting</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>add_mute_audio</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to add silent AAC audio when there is no audio</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>mp4_save_path</code></td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">Root directory for saving MP4 recording files, use default if empty</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>mp4_max_second</code></td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">Maximum duration of MP4 recording slices in seconds</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>mp4_as_player</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether MP4 recording counts as a viewer for counting the number of viewers</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>hls_save_path</code></td><td style="text-align:center;"><code>string</code></td><td style="text-align:center;">The root directory where the hls file is saved, leave it blank and use the default</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>modify_stamp</code></td><td style="text-align:center;"><code>int</code></td><td style="text-align:center;">Whether this stream enables timestamp coverage (0: absolute timestamp/1: system timestamp/2: relative timestamp)</td><td style="text-align:center;">N</td></tr><tr><td style="text-align:center;"><code>auto_close</code></td><td style="text-align:center;"><code>bool</code></td><td style="text-align:center;">Whether to automatically close the stream if no one is watching it (without triggering the unwatched hook)</td><td style="text-align:center;">N</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;key&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;__defaultVhost__/proxy/0&quot;</span>  # The unique identifier of the stream
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),kt=t("h3",{id:"_13-index-api-delstreamproxy-can-also-be-replaced-with-the-close-streams-interface-after-successful-stream-registration",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_13-index-api-delstreamproxy-can-also-be-replaced-with-the-close-streams-interface-after-successful-stream-registration","aria-hidden":"true"},"#"),e(" 13. "),t("code",null,"/index/api/delStreamProxy (Can also be replaced with the close_streams interface after successful stream registration)")],-1),mt=t("li",null,[t("p",null,"Function: Close pull streaming proxy.")],-1),ht={href:"http://127.0.0.1/index/api/delStreamProxy?key=__defaultVhost__/proxy/0",target:"_blank",rel:"noopener noreferrer"},gt=t("code",null,"__defaultVhost__",-1),vt=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the configuration file)</td></tr><tr><td style="text-align:center;">key</td><td style="text-align:center;">Y</td><td style="text-align:center;">The key returned by the addStreamProxy interface</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;flag&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # Success or failure
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),yt=t("h3",{id:"_14-index-api-addffmpegsource",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_14-index-api-addffmpegsource","aria-hidden":"true"},"#"),e(" 14. "),t("code",null,"/index/api/addFFmpegSource")],-1),bt=t("li",null,[t("p",null,"Function: Pull stream proxy by forking FFmpeg process, supports any protocol.")],-1),xt={href:"http://127.0.0.1/index/api/addFFmpegSource?src_url=http://live.hkstv.hk.lxdns.com/live/hks2/playlist.m3u8&dst_url=rtmp://127.0.0.1/live/hks2&timeout_ms=10000&ffmpeg_cmd_key=ffmpeg.cmd",target:"_blank",rel:"noopener noreferrer"},qt=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the configuration file)</td></tr><tr><td style="text-align:center;">src_url</td><td style="text-align:center;">Y</td><td style="text-align:center;">FFmpeg pulling stream address, supports any protocol or format (as long as FFmpeg supports it)</td></tr><tr><td style="text-align:center;">dst_url</td><td style="text-align:center;">Y</td><td style="text-align:center;">FFmpeg rtmp push stream address, usually push to oneself, for example, rtmp://127.0.0.1/live/stream_from_ffmpeg</td></tr><tr><td style="text-align:center;">timeout_ms</td><td style="text-align:center;">Y</td><td style="text-align:center;">Timeout for successful FFmpeg stream pushing</td></tr><tr><td style="text-align:center;">enable_hls</td><td style="text-align:center;">Y</td><td style="text-align:center;">Whether to enable HLS recording</td></tr><tr><td style="text-align:center;">enable_mp4</td><td style="text-align:center;">Y</td><td style="text-align:center;">Whether to enable MP4 recording</td></tr><tr><td style="text-align:center;">ffmpeg_cmd_key</td><td style="text-align:center;">N</td><td style="text-align:center;">Key for FFmpeg command parameter template in the configuration file (not content), if left empty, the default template <code>ffmpeg.cmd</code> will be used</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;key&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5f748d2ef9712e4b2f6f970c1d44d93a&quot;</span>  # Unique key
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),_t=t("h3",{id:"_15-index-api-delffmpegsource-can-also-be-replaced-with-the-close-streams-interface-after-successful-stream-registration",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_15-index-api-delffmpegsource-can-also-be-replaced-with-the-close-streams-interface-after-successful-stream-registration","aria-hidden":"true"},"#"),e(" 15. "),t("code",null,"/index/api/delFFmpegSource (Can also be replaced with the close_streams interface after successful stream registration)")],-1),ft=t("li",null,[t("p",null,"Function: Close FFmpeg stream proxy.")],-1),Pt={href:"http://127.0.0.1/index/api/delFFmpegSource?key=5f748d2ef9712e4b2f6f970c1d44d93a",target:"_blank",rel:"noopener noreferrer"},St=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the configuration file)</td></tr><tr><td style="text-align:center;">key</td><td style="text-align:center;">Y</td><td style="text-align:center;">The key returned by the addFFmpegSource interface</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;flag&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # Success or failure
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Rt=t("h3",{id:"_16-index-api-ismediaonline-deprecated-please-use-getmedialist-api-instead",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_16-index-api-ismediaonline-deprecated-please-use-getmedialist-api-instead","aria-hidden":"true"},"#"),e(" 16. "),t("code",null,"/index/api/isMediaOnline (Deprecated, please use getMediaList API instead)")],-1),At=t("li",null,[t("p",null,"Function: Check if the media stream is online.")],-1),Tt={href:"http://127.0.0.1/index/api/isMediaOnline?schema=rtsp&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},jt=t("code",null,"__defaultVhost__",-1),wt=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">Protocol, e.g., rtsp or rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, e.g., <strong>defaultVhost</strong></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, e.g., live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, e.g., obs</td></tr></tbody></table><ul><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;online&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # Whether it&#39;s online
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li>`,1),Yt=t("h3",{id:"_17-index-api-getmediainfo-deprecated-please-use-getmedialist-api-instead",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_17-index-api-getmediainfo-deprecated-please-use-getmedialist-api-instead","aria-hidden":"true"},"#"),e(" 17. "),t("code",null,"/index/api/getMediaInfo (Deprecated, please use getMediaList API instead)")],-1),It=t("li",null,[t("p",null,"Function: Get information about the stream.")],-1),Ft={href:"http://127.0.0.1/index/api/getMediaInfo?schema=rtsp&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},Dt=t("code",null,"__defaultVhost__",-1),Ct=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">Protocol, e.g., rtsp or rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, e.g., <strong>defaultVhost</strong></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, e.g., live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, e.g., obs</td></tr></tbody></table><ul><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;online&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> # Whether it&#39;s online
  <span class="token property">&quot;readerCount&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Number of viewers for this protocol
  <span class="token property">&quot;totalReaderCount&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Total number of viewers<span class="token punctuation">,</span> including hls/rtsp/rtmp/http-flv/ws-flv
  <span class="token property">&quot;tracks&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> # Track list
        <span class="token punctuation">{</span>
           <span class="token property">&quot;channels&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # Number of audio channels
           <span class="token property">&quot;codec_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> # H264 = <span class="token number">0</span><span class="token punctuation">,</span> H265 = <span class="token number">1</span><span class="token punctuation">,</span> AAC = <span class="token number">2</span><span class="token punctuation">,</span> G711A = <span class="token number">3</span><span class="token punctuation">,</span> G711U = <span class="token number">4</span>
           <span class="token property">&quot;codec_id_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CodecAAC&quot;</span><span class="token punctuation">,</span> # Codec type name
           <span class="token property">&quot;codec_type&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> # Video = <span class="token number">0</span><span class="token punctuation">,</span> Audio = <span class="token number">1</span>
           <span class="token property">&quot;ready&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> # Whether the track is ready
           <span class="token property">&quot;sample_bit&quot;</span> <span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> # Audio sample bit depth
           <span class="token property">&quot;sample_rate&quot;</span> <span class="token operator">:</span> <span class="token number">8000</span> # Audio sample rate
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
           <span class="token property">&quot;codec_id&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # H264 = <span class="token number">0</span><span class="token punctuation">,</span> H265 = <span class="token number">1</span><span class="token punctuation">,</span> AAC = <span class="token number">2</span><span class="token punctuation">,</span> G711A = <span class="token number">3</span><span class="token punctuation">,</span> G711U = <span class="token number">4</span>
           <span class="token property">&quot;codec_id_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CodecH264&quot;</span><span class="token punctuation">,</span> #  Codec type name
           <span class="token property">&quot;codec_type&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Video = <span class="token number">0</span><span class="token punctuation">,</span> Audio = <span class="token number">1</span>
           <span class="token property">&quot;fps&quot;</span> <span class="token operator">:</span> <span class="token number">59</span><span class="token punctuation">,</span>  # Video fps
           <span class="token property">&quot;height&quot;</span> <span class="token operator">:</span> <span class="token number">720</span><span class="token punctuation">,</span> #  Video height
           <span class="token property">&quot;ready&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  # Whether the track is ready
           <span class="token property">&quot;width&quot;</span> <span class="token operator">:</span> <span class="token number">1280</span> # Video width
        <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li>`,1),Vt=t("h3",{id:"_18-index-api-getrtpinfo",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_18-index-api-getrtpinfo","aria-hidden":"true"},"#"),e(" 18. "),t("code",null,"/index/api/getRtpInfo")],-1),Nt=t("li",null,[t("p",null,"Function: Get the RTP information of a specific SSRC when proxying RTP.")],-1),Mt={href:"http://127.0.0.1/index/api/getRtpInfo?ssrc=1A2B3C4D",target:"_blank",rel:"noopener noreferrer"},Et=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the file)</td></tr><tr><td style="text-align:center;">stream_id</td><td style="text-align:center;">Y</td><td style="text-align:center;">The SSRC of RTP, in hexadecimal string or the ID of the stream (specified in the openRtpServer interface)</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;exist&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> # Whether it exists
   <span class="token property">&quot;peer_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;192.168.0.23&quot;</span><span class="token punctuation">,</span> #  Client IP address for streaming
   <span class="token property">&quot;peer_port&quot;</span> <span class="token operator">:</span> <span class="token number">54000</span> # Client port
   <span class="token property">&quot;local_ip&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span> # Local listening network card IP
   <span class="token property">&quot;local_port&quot;</span> <span class="token operator">:</span> <span class="token number">10000</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Lt=t("h3",{id:"_19-index-api-getmp4recordfile",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_19-index-api-getmp4recordfile","aria-hidden":"true"},"#"),e(" 19. "),t("code",null,"/index/api/getMp4RecordFile")],-1),Wt=t("li",null,[t("p",null,"Function: Search the file system to get the list of recorded files or date folders corresponding to a stream.")],-1),Bt={href:"http://127.0.0.1/index/api/getMp4RecordFile?vhost=__defaultVhost__&app=live&stream=ss&period=2020-01",target:"_blank",rel:"noopener noreferrer"},Gt=t("code",null,"__defaultVhost__",-1),Ht=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the file)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host name of the stream</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name of the stream</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">ID of the stream</td></tr><tr><td style="text-align:center;">period</td><td style="text-align:center;">Y</td><td style="text-align:center;">Recording date of the stream in the format &quot;2020-02-01&quot;. If it&#39;s not a complete date, it searches for the list of recording folders. Otherwise, it searches for the list of MP4 files for the specified date.</td></tr><tr><td style="text-align:center;">customized_path</td><td style="text-align:center;">N</td><td style="text-align:center;">Customized search path, same as the <code>customized_path</code> in the <code>startRecord</code> method. Defaults to the path in the configuration file.</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code># Search folder list (matching by prefix rule)<span class="token operator">:</span> period = <span class="token number">2020</span><span class="token number">-01</span>
<span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;paths&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;2020-01-25&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2020-01-24&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rootPath&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/www/record/live/ss/&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

# Search MP4 file list<span class="token operator">:</span> period = <span class="token number">2020</span><span class="token number">-01</span><span class="token number">-24</span>
<span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;paths&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
         <span class="token string">&quot;22-20-30.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;22-13-12.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;21-57-07.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;21-19-18.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;21-24-21.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;21-15-10.mp4&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;22-14-14.mp4&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rootPath&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;/www/live/ss/2020-01-24/&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Ut=t("h3",{id:"_20-index-api-startrecord",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_20-index-api-startrecord","aria-hidden":"true"},"#"),e(" 20. "),t("code",null,"/index/api/startRecord")],-1),zt=t("li",null,[t("p",null,"Function: Start recording in HLS or MP4 format.")],-1),Ot={href:"http://127.0.0.1/index/api/startRecord?type=1&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},Kt=t("code",null,"__defaultVhost__",-1),Zt=t("li",null,[t("p",null,"Parameters:")],-1),Jt=a(`<table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th><th style="text-align:center;">Type</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API access key (configured in file)</td><td style="text-align:center;">string</td></tr><tr><td style="text-align:center;">type</td><td style="text-align:center;">Y</td><td style="text-align:center;">0 for HLS, 1 for MP4 format</td><td style="text-align:center;">0/1</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, e.g., &quot;<strong>defaultVhost</strong>&quot;</td><td style="text-align:center;">string</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, e.g., &quot;live&quot;</td><td style="text-align:center;">string</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, e.g., &quot;obs&quot;</td><td style="text-align:center;">string</td></tr><tr><td style="text-align:center;">customized_path</td><td style="text-align:center;">N</td><td style="text-align:center;">Directory for storing the recordings</td><td style="text-align:center;">string</td></tr><tr><td style="text-align:center;">max_second</td><td style="text-align:center;">N</td><td style="text-align:center;">Maximum duration of MP4 recording segments in seconds. Set to 0 to use the configured value.</td><td style="text-align:center;">int</td></tr></tbody></table><ul><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # success or failure
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_21-index-api-stoprecord" tabindex="-1"><a class="header-anchor" href="#_21-index-api-stoprecord" aria-hidden="true">#</a> 21. <code>/index/api/stopRecord</code></h3>`,3),Qt=t("li",null,[t("p",null,"Function: Stop recording the stream.")],-1),Xt={href:"http://127.0.0.1/index/api/stopRecord?type=1&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},$t=t("code",null,"__defaultVhost__",-1),te=t("li",null,[t("p",null,"Parameters:")],-1),ee=a(`<table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API access key (configured in file)</td></tr><tr><td style="text-align:center;">type</td><td style="text-align:center;">Y</td><td style="text-align:center;">0 for HLS, 1 for MP4 format</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, e.g., &quot;<strong>defaultVhost</strong>&quot;</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, e.g., &quot;live&quot;</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, e.g., &quot;obs&quot;</td></tr></tbody></table><ul><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # success or failure
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_22-index-api-isrecording" tabindex="-1"><a class="header-anchor" href="#_22-index-api-isrecording" aria-hidden="true">#</a> 22. <code>/index/api/isRecording</code></h3>`,3),ne=t("li",null,[t("p",null,"Function: Get the recording status of the stream.")],-1),se={href:"http://127.0.0.1/index/api/isRecording?type=1&vhost=__defaultVhost__&app=live&stream=obs",target:"_blank",rel:"noopener noreferrer"},ae=t("code",null,"__defaultVhost__",-1),oe=t("li",null,[t("p",null,"Parameters:")],-1),le=a(`<table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API access key (configured in file)</td></tr><tr><td style="text-align:center;">type</td><td style="text-align:center;">Y</td><td style="text-align:center;">0 for HLS, 1 for MP4 format</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, e.g., &quot;<strong>defaultVhost</strong>&quot;</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, e.g., &quot;live&quot;</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, e.g., &quot;obs&quot;</td></tr></tbody></table><ul><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # <span class="token boolean">false</span><span class="token operator">:</span> not recording<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token operator">:</span> currently recording
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_23-index-api-getsnap" tabindex="-1"><a class="header-anchor" href="#_23-index-api-getsnap" aria-hidden="true">#</a> 23. <code>/index/api/getSnap</code></h3>`,3),pe=t("li",null,[t("p",null,"Function: Get a screenshot or generate a real-time screenshot and return it.")],-1),ie={href:"http://127.0.0.1/index/api/getSnap?url=rtmp://127.0.0.1/record/robot.mp4&timeout_sec=10&expire_sec=30",target:"_blank",rel:"noopener noreferrer"},re=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured file)</td></tr><tr><td style="text-align:center;">url</td><td style="text-align:center;">Y</td><td style="text-align:center;">The URL of the image to capture, which can be local or remote.</td></tr><tr><td style="text-align:center;">timeout_sec</td><td style="text-align:center;">Y</td><td style="text-align:center;">Timeout for capturing the image to prevent FFmpeg from waiting indefinitely.</td></tr><tr><td style="text-align:center;">expire_sec</td><td style="text-align:center;">Y</td><td style="text-align:center;">Expiration time for the captured image cache. All images generated within this time will be returned as cache.</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>The image in JPEG format<span class="token punctuation">,</span> can be directly opened in a browser.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>`,2),ce=t("h3",{id:"_24-index-api-openrtpserver",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_24-index-api-openrtpserver","aria-hidden":"true"},"#"),e(" 24. "),t("code",null,"/index/api/openRtpServer")],-1),de=t("li",null,[t("p",null,"Function: Create a GB28181 RTP receiving port. If the port times out receiving data, it will be automatically released (no need to call the closeRtpServer interface).")],-1),ue={href:"http://127.0.0.1/index/api/openRtpServer?port=0&tcp_mode=1&stream_id=test",target:"_blank",rel:"noopener noreferrer"},ke=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured file)</td></tr><tr><td style="text-align:center;">port</td><td style="text-align:center;">Y</td><td style="text-align:center;">Receiving port. If set to 0, a random port will be used.</td></tr><tr><td style="text-align:center;">tcp_mode</td><td style="text-align:center;">Y</td><td style="text-align:center;">0 for UDP mode, 1 for TCP passive mode, 2 for TCP active mode (compatible with enable_tcp: 0/1).</td></tr><tr><td style="text-align:center;">stream_id</td><td style="text-align:center;">Y</td><td style="text-align:center;">The stream ID bound to this port. Only this stream can be created on this port (not multiple streams based on SSRC).</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;port&quot;</span> <span class="token operator">:</span> <span class="token number">55463</span> # Receiving port for easy reference to the random port number.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),me=t("h3",{id:"_25-index-api-closertpserver",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_25-index-api-closertpserver","aria-hidden":"true"},"#"),e(" 25. "),t("code",null,"/index/api/closeRtpServer")],-1),he=t("li",null,[t("p",null,"Function: Close the GB28181 RTP receiving port.")],-1),ge={href:"http://127.0.0.1/index/api/closeRtpServer?stream_id=test",target:"_blank",rel:"noopener noreferrer"},ve=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured file)</td></tr><tr><td style="text-align:center;">stream_id</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID provided when calling the openRtpServer interface.</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;hit&quot;</span><span class="token operator">:</span> <span class="token number">1</span> # Whether the record was found and closed.
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),ye=t("h3",{id:"_26-index-api-listrtpserver",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_26-index-api-listrtpserver","aria-hidden":"true"},"#"),e(" 26. "),t("code",null,"/index/api/listRtpServer")],-1),be=t("li",null,[t("p",null,"Function: Get all RTP servers created by the openRtpServer interface.")],-1),xe={href:"http://127.0.0.1/index/api/listRtpServer",target:"_blank",rel:"noopener noreferrer"},qe=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in file)</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         <span class="token property">&quot;port&quot;</span> <span class="token operator">:</span> <span class="token number">52183</span><span class="token punctuation">,</span> # Bound port number
         <span class="token property">&quot;stream_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;test&quot;</span> # Bound stream ID
      <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),_e=t("h3",{id:"_27-index-api-startsendrtp",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_27-index-api-startsendrtp","aria-hidden":"true"},"#"),e(" 27. "),t("code",null,"/index/api/startSendRtp")],-1),fe=t("li",null,[t("p",null,"Function: Start ps-rtp streaming as a GB28181 client, supporting rtp/udp mode. This interface supports converting protocols such as rtsp/rtmp to ps-rtp streaming. The first streaming attempt failure will return an error directly. After a successful attempt, subsequent failures will be retried indefinitely.")],-1),Pe={href:"http://127.0.0.1/index/api/startSendRtp?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost=__defaultVhost__&app=live&stream=test&ssrc=1&dst_url=127.0.0.1&dst_port=10000&is_udp=0",target:"_blank",rel:"noopener noreferrer"},Se=t("code",null,"__defaultVhost__",-1),Re=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in file)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, for example <strong>defaultVhost</strong></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, for example live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, for example test</td></tr><tr><td style="text-align:center;">ssrc</td><td style="text-align:center;">Y</td><td style="text-align:center;">SSRC of the RTP stream. Specifying different SSRCs can stream to multiple servers simultaneously</td></tr><tr><td style="text-align:center;">dst_url</td><td style="text-align:center;">Y</td><td style="text-align:center;">Destination IP or domain</td></tr><tr><td style="text-align:center;">dst_port</td><td style="text-align:center;">Y</td><td style="text-align:center;">Destination port number</td></tr><tr><td style="text-align:center;">is_udp</td><td style="text-align:center;">Y</td><td style="text-align:center;">Whether it is UDP mode, otherwise it is TCP mode</td></tr><tr><td style="text-align:center;">src_port</td><td style="text-align:center;">N</td><td style="text-align:center;">Local port used, default to a random port if set to 0 or not provided</td></tr><tr><td style="text-align:center;">pt</td><td style="text-align:center;">N</td><td style="text-align:center;">RTP payload type (uint8_t) when sending, default to 96 if not provided</td></tr><tr><td style="text-align:center;">use_ps</td><td style="text-align:center;">N</td><td style="text-align:center;">RTP payload type when sending. Set to 1 for PS payload, 0 for ES payload. Default to 1 if not provided</td></tr><tr><td style="text-align:center;">only_audio</td><td style="text-align:center;">N</td><td style="text-align:center;">Effective when use_ps is 0. Set to 1 to send audio, 0 to send video. Default to 0 if not provided</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Success
   <span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span> <span class="token number">57152</span> # Local port number used
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Ae=t("h4",{id:"_27-1-index-api-startsendrtppassive",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_27-1-index-api-startsendrtppassive","aria-hidden":"true"},"#"),e(" 27.1. "),t("code",null,"/index/api/startSendRtpPassive")],-1),Te=t("li",null,[t("p",null,"Function: Acts as a GB28181 Passive TCP server. This interface supports the conversion of protocols such as RTSP/RTMP to PS-RTP for passive streaming. When calling this interface, zlm will start a TCP server and wait for connection requests. After the connection is established, zlm will close the TCP server and continuously stream to the client. If the first streaming attempt fails, an error will be returned directly. Once successful, subsequent failures will be retried indefinitely (continuously establishing TCP listening and closing after timeout).")],-1),je={href:"http://127.0.0.1/index/api/startSendRtpPassive?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost=__defaultVhost__&app=live&stream=test&ssrc=1",target:"_blank",rel:"noopener noreferrer"},we=t("strong",null,"defaultVhost",-1),Ye=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameters</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the file)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, for example, <strong>defaultVhost</strong></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, for example, live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, for example, test</td></tr><tr><td style="text-align:center;">ssrc</td><td style="text-align:center;">Y</td><td style="text-align:center;">SSRC of the RTP stream, specifying different SSRCs allows streaming to multiple servers simultaneously</td></tr><tr><td style="text-align:center;">src_port</td><td style="text-align:center;">N</td><td style="text-align:center;">Local port used; defaults to a random port if 0 or not specified</td></tr><tr><td style="text-align:center;">pt</td><td style="text-align:center;">N</td><td style="text-align:center;">PT (uint8_t) for RTP when sending; defaults to 96 if not specified</td></tr><tr><td style="text-align:center;">use_ps</td><td style="text-align:center;">N</td><td style="text-align:center;">Payload type for RTP when sending. If 1, payload is PS; if 0, payload is ES; defaults to 1 if not specified</td></tr><tr><td style="text-align:center;">only_audio</td><td style="text-align:center;">N</td><td style="text-align:center;">Valid when use_ps is 0. If 1, audio is sent; if 0, video is sent; defaults to 0 if not specified</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> # Success
   <span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span> <span class="token number">57152</span> # Local port number used
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Ie=t("h3",{id:"_28-index-api-stopsendrtp",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_28-index-api-stopsendrtp","aria-hidden":"true"},"#"),e(" 28. "),t("code",null,"/index/api/stopSendRtp")],-1),Fe=t("li",null,[t("p",null,"Function: Stops GB28181 PS-RTP push streaming.")],-1),De={href:"http://127.0.0.1/index/api/stopSendRtp?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost=__defaultVhost__&app=live&stream=test",target:"_blank",rel:"noopener noreferrer"},Ce=t("strong",null,"defaultVhost",-1),Ve=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameters</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation secret key (configured in the file)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, for example, <strong>defaultVhost</strong></td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, for example, live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, for example, test</td></tr><tr><td style="text-align:center;">ssrc</td><td style="text-align:center;">N</td><td style="text-align:center;">Stop RTP streaming for a specific SSRC, or close all streams if empty</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span> # Success
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Ne=t("h3",{id:"_29-index-api-getstatistic",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_29-index-api-getstatistic","aria-hidden":"true"},"#"),e(" 29. "),t("code",null,"/index/api/getStatistic")],-1),Me=t("li",null,[t("p",null,"Function: Get statistics on the number of main objects, mainly used for analyzing memory performance.")],-1),Ee={href:"http://127.0.0.1/index/api/getStatistic?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc",target:"_blank",rel:"noopener noreferrer"},Le=t("li",null,[t("p",null,"Parameters:")],-1),We=a(`<table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in the file)</td></tr></tbody></table><ul><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;Buffer&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;BufferLikeString&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;BufferList&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;BufferRaw&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Frame&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;FrameImp&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;MediaSource&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;MultiMediaSourceMuxer&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Socket&quot;</span><span class="token operator">:</span> <span class="token number">66</span><span class="token punctuation">,</span>
    <span class="token property">&quot;TcpClient&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;TcpServer&quot;</span><span class="token operator">:</span> <span class="token number">64</span><span class="token punctuation">,</span>
    <span class="token property">&quot;TcpSession&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_30-index-api-addstreampusherproxy" tabindex="-1"><a class="header-anchor" href="#_30-index-api-addstreampusherproxy" aria-hidden="true">#</a> 30. <code>/index/api/addStreamPusherProxy</code></h3>`,3),Be=t("li",null,[t("p",null,"Function: Add active RTSP/RTMP stream pusher (push the live stream from this server to another server).")],-1),Ge={href:"http://127.0.0.1/index/api/addStreamProxy?vhost=%60__defaultVhost__%60&app=proxy&stream=test&dst_url=rtmp://127.0.0.1/live/test2",target:"_blank",rel:"noopener noreferrer"},He=t("code",null,"__defaultVhost__",-1),Ue=t("li",null,[t("p",null,"Parameters:")],-1),ze=a(`<table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured in the file)</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host of the added stream, for example, <code>__defaultVhost__</code></td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">Protocol, e.g., rtsp or rtmp</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name of the added stream, e.g., live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID to be pushed</td></tr><tr><td style="text-align:center;">dst_url</td><td style="text-align:center;">Y</td><td style="text-align:center;">Destination push URL, if it contains parameters, they need to be URL-encoded</td></tr><tr><td style="text-align:center;">retry_count</td><td style="text-align:center;">N</td><td style="text-align:center;">Retry count for failed push, unlimited by default</td></tr><tr><td style="text-align:center;">rtp_type</td><td style="text-align:center;">N</td><td style="text-align:center;">Pushing method for RTSP stream, 0: TCP, 1: UDP</td></tr><tr><td style="text-align:center;">timeout_sec</td><td style="text-align:center;">N</td><td style="text-align:center;">Push timeout in seconds, float type</td></tr></tbody></table><ul><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;key&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;rtmp/__defaultVhost__/proxy/test/4AB43C9EABEB76AB443BB8260C8B2D12&quot;</span>  # Unique identifier of the stream
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_31-index-api-delstreampusherproxy-可以使用close-streams接口关闭源直播流也可以停止推流" tabindex="-1"><a class="header-anchor" href="#_31-index-api-delstreampusherproxy-可以使用close-streams接口关闭源直播流也可以停止推流" aria-hidden="true">#</a> 31. <code>/index/api/delStreamPusherProxy(可以使用close_streams接口关闭源直播流也可以停止推流)</code></h3>`,3),Oe=t("li",null,[t("p",null,"Function: Close the stream pushing.")],-1),Ke={href:"http://127.0.0.1/index/api/delStreamPusherProxy?key=rtmp/__defaultVhost__/proxy/test/4AB43C9EABEB76AB443BB8260C8B2D12",target:"_blank",rel:"noopener noreferrer"},Ze=t("strong",null,"defaultVhost",-1),Je=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Explanation</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured)</td></tr><tr><td style="text-align:center;">key</td><td style="text-align:center;">Y</td><td style="text-align:center;">Key returned by the &#39;addStreamPusherProxy&#39; interface</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;data&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;flag&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span> # Success or failure
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),Qe=t("h3",{id:"_32-index-api-version-获取版本信息",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_32-index-api-version-获取版本信息","aria-hidden":"true"},"#"),e(" 32. "),t("code",null,"/index/api/version(获取版本信息)")],-1),Xe=t("li",null,[t("p",null,"Function: Get version information, such as branch, commit ID, and build time.")],-1),$e={href:"http://127.0.0.1/index/api/version",target:"_blank",rel:"noopener noreferrer"},tn=a(`<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Explanation</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured)</td></tr></tbody></table></li><li><p>Response:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;branchName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;master&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;buildTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-04-19T10:34:34&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;commitHash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f143898&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),en=t("h3",{id:"_33-index-api-getmediaplayerlist",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_33-index-api-getmediaplayerlist","aria-hidden":"true"},"#"),e(" 33. "),t("code",null,"/index/api/getMediaPlayerList")],-1),nn=t("li",null,[t("p",null,"Function: Get the list of viewers for a specific stream.")],-1),sn={href:"http://127.0.0.1:8080/index/api/getMediaPlayerList?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&schema=rtsp&vhost=__defaultVhost__&app=live&stream=test'",target:"_blank",rel:"noopener noreferrer"},an=t("strong",null,"defaultVhost",-1),on=a('<li><p>Parameters:</p><table><thead><tr><th style="text-align:center;">Parameter</th><th style="text-align:center;">Required</th><th style="text-align:center;">Explanation</th></tr></thead><tbody><tr><td style="text-align:center;">secret</td><td style="text-align:center;">Y</td><td style="text-align:center;">API operation key (configured)</td></tr><tr><td style="text-align:center;">schema</td><td style="text-align:center;">Y</td><td style="text-align:center;">Protocol, e.g., rtsp or rtmp</td></tr><tr><td style="text-align:center;">vhost</td><td style="text-align:center;">Y</td><td style="text-align:center;">Virtual host, e.g., &#39;<strong>defaultVhost</strong>&#39;</td></tr><tr><td style="text-align:center;">app</td><td style="text-align:center;">Y</td><td style="text-align:center;">Application name, e.g., live</td></tr><tr><td style="text-align:center;">stream</td><td style="text-align:center;">Y</td><td style="text-align:center;">Stream ID, e.g., obs</td></tr></tbody></table></li><li><p>Response:</p></li>',2),ln=a(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3-309&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;local_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;::&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
      <span class="token property">&quot;peer_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;172.18.190.159&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;peer_port&quot;</span><span class="token operator">:</span> <span class="token number">52996</span><span class="token punctuation">,</span>
      <span class="token property">&quot;typeid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mediakit::WebRtcSession&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function pn(rn,cn){const n=l("ExternalLinkIcon");return p(),i("div",null,[c,t("p",null,[t("a",d,[e("Postman configuration file"),s(n)])]),t("p",null,[e("Due to frequent updates in the API, while reading this document, please use Postman to verify and test the API endpoints. It is possible that some endpoints may be missing in this document. You can also refer to the "),t("a",u,[e("code"),s(n)]),e(".")]),k,t("ul",null,[m,t("li",null,[t("p",null,[e("Example:"),t("a",h,[e("http://127.0.0.1/index/api/getApiList"),s(n)])])]),g]),v,t("ul",null,[y,t("li",null,[t("p",null,[e("Example:"),t("a",b,[e("http://127.0.0.1/index/api/getThreadsLoad"),s(n)])])]),x]),q,t("ul",null,[_,t("li",null,[t("p",null,[e("Example:"),t("a",f,[e("http://127.0.0.1/index/api/getWorkThreadsLoad"),s(n)])])]),P]),S,t("ul",null,[R,t("li",null,[t("p",null,[e("Example:"),t("a",A,[e("http://127.0.0.1/index/api/getServerConfig"),s(n)])])]),T]),j,t("ul",null,[w,t("li",null,[t("p",null,[e("Example:"),t("a",Y,[e("http://127.0.0.1/index/api/setServerConfig?api.apiDebug=0(例如关闭 http api 调试)"),s(n)])])]),I]),F,t("ul",null,[D,t("li",null,[t("p",null,[e("Example:"),t("a",C,[e("http://127.0.0.1/index/api/restartServer"),s(n)])])]),V]),N,t("ul",null,[M,t("li",null,[t("p",null,[e("Example:"),t("a",E,[e("http://127.0.0.1/index/api/getMediaList"),s(n)])])]),L]),W,t("ul",null,[B,t("li",null,[t("p",null,[e("Example:"),t("a",G,[e("http://127.0.0.1/index/api/close_stream?schema=rtmp&vhost="),H,e("&app=live&stream=0&force=1"),s(n)])])]),U]),z,t("ul",null,[O,t("li",null,[t("p",null,[e("Example:"),t("a",K,[e("http://127.0.0.1/index/api/close_streams?schema=rtmp&vhost="),Z,e("&app=live&stream=0&force=1"),s(n)])])]),J]),Q,t("ul",null,[X,t("li",null,[t("p",null,[e("Example:"),t("a",$,[e("http://127.0.0.1/index/api/getAllSession"),s(n)])])]),tt]),et,t("ul",null,[nt,t("li",null,[t("p",null,[e("Example:"),t("a",st,[e("http://127.0.0.1/index/api/kick_session?id=140614440178720"),s(n)])])]),at]),ot,t("ul",null,[lt,t("li",null,[t("p",null,[e("Example:"),t("a",pt,[e("http://127.0.0.1/index/api/kick_sessions?local_port=554"),s(n)])])]),it]),rt,t("ul",null,[t("li",null,[t("p",null,[e("Example:"),t("a",ct,[e("http://127.0.0.1/index/api/addStreamProxy?vhost="),dt,e("&app=proxy&stream=0&url=rtmp://live.hkstv.hk.lxdns.com/live/hks2"),s(n)])])]),ut]),kt,t("ul",null,[mt,t("li",null,[t("p",null,[e("Example:"),t("a",ht,[e("http://127.0.0.1/index/api/delStreamProxy?key="),gt,e("/proxy/0"),s(n)])])]),vt]),yt,t("ul",null,[bt,t("li",null,[t("p",null,[e("Example:"),t("a",xt,[e("http://127.0.0.1/index/api/addFFmpegSource?src_url=http://live.hkstv.hk.lxdns.com/live/hks2/playlist.m3u8&dst_url=rtmp://127.0.0.1/live/hks2&timeout_ms=10000&ffmpeg_cmd_key=ffmpeg.cmd"),s(n)])])]),qt]),_t,t("ul",null,[ft,t("li",null,[t("p",null,[e("Example: "),t("a",Pt,[e("http://127.0.0.1/index/api/delFFmpegSource?key=5f748d2ef9712e4b2f6f970c1d44d93a"),s(n)])])]),St]),Rt,t("ul",null,[At,t("li",null,[t("p",null,[e("Example:"),t("a",Tt,[e("http://127.0.0.1/index/api/isMediaOnline?schema=rtsp&vhost="),jt,e("&app=live&stream=obs"),s(n)])])]),wt]),Yt,t("ul",null,[It,t("li",null,[t("p",null,[e("Example:"),t("a",Ft,[e("http://127.0.0.1/index/api/getMediaInfo?schema=rtsp&vhost="),Dt,e("&app=live&stream=obs"),s(n)])])]),Ct]),Vt,t("ul",null,[Nt,t("li",null,[t("p",null,[e("Example:"),t("a",Mt,[e("http://127.0.0.1/index/api/getRtpInfo?stream_id=1A2B3C4D"),s(n)])])]),Et]),Lt,t("ul",null,[Wt,t("li",null,[t("p",null,[e("Example:"),t("a",Bt,[e("http://127.0.0.1/index/api/getMp4RecordFile?vhost="),Gt,e("&app=live&stream=ss&period=2020-01"),s(n)])])]),Ht]),Ut,t("ul",null,[zt,t("li",null,[t("p",null,[e("Example:"),t("a",Ot,[e("http://127.0.0.1/index/api/startRecord?type=1&vhost="),Kt,e("&app=live&stream=obs"),s(n)])])]),Zt]),Jt,t("ul",null,[Qt,t("li",null,[t("p",null,[e("Example:"),t("a",Xt,[e("http://127.0.0.1/index/api/stopRecord?type=1&vhost="),$t,e("&app=live&stream=obs"),s(n)])])]),te]),ee,t("ul",null,[ne,t("li",null,[t("p",null,[e("Example:"),t("a",se,[e("http://127.0.0.1/index/api/isRecording?type=1&vhost="),ae,e("&app=live&stream=obs"),s(n)])])]),oe]),le,t("ul",null,[pe,t("li",null,[t("p",null,[e("Example:"),t("a",ie,[e("http://127.0.0.1/index/api/getSnap?url=rtmp://127.0.0.1/record/robot.mp4&timeout_sec=10&expire_sec=30"),s(n)])])]),re]),ce,t("ul",null,[de,t("li",null,[t("p",null,[e("Example:"),t("a",ue,[e("http://127.0.0.1/index/api/openRtpServer?port=0&tcp_mode=1&stream_id=test"),s(n)])])]),ke]),me,t("ul",null,[he,t("li",null,[t("p",null,[e("Example:"),t("a",ge,[e("http://127.0.0.1/index/api/closeRtpServer?stream_id=test"),s(n)])])]),ve]),ye,t("ul",null,[be,t("li",null,[t("p",null,[e("Example:"),t("a",xe,[e("http://127.0.0.1/index/api/listRtpServer"),s(n)])])]),qe]),_e,t("ul",null,[fe,t("li",null,[t("p",null,[e("Example:"),t("a",Pe,[e("http://127.0.0.1/index/api/startSendRtp?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost="),Se,e("&app=live&stream=test&ssrc=1&dst_url=127.0.0.1&dst_port=10000&is_udp=0"),s(n)])])]),Re]),Ae,t("ul",null,[Te,t("li",null,[t("p",null,[e("Example: "),t("a",je,[e("http://127.0.0.1/index/api/startSendRtpPassive?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost="),we,e("&app=live&stream=test&ssrc=1"),s(n)])])]),Ye]),Ie,t("ul",null,[Fe,t("li",null,[t("p",null,[e("Example: "),t("a",De,[e("http://127.0.0.1/index/api/stopSendRtp?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&vhost="),Ce,e("&app=live&stream=test"),s(n)])])]),Ve]),Ne,t("ul",null,[Me,t("li",null,[t("p",null,[e("Example:"),t("a",Ee,[e("http://127.0.0.1/index/api/getStatistic?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc"),s(n)])])]),Le]),We,t("ul",null,[Be,t("li",null,[t("p",null,[e("Example:"),t("a",Ge,[e("http://127.0.0.1/index/api/addStreamPusherProxy?vhost="),He,e("&app=proxy&stream=test&dst_url=rtmp://127.0.0.1/live/test2"),s(n)])])]),Ue]),ze,t("ul",null,[Oe,t("li",null,[t("p",null,[e("Example:"),t("a",Ke,[e("http://127.0.0.1/index/api/delStreamPusherProxy?key=rtmp/"),Ze,e("/proxy/test/4AB43C9EABEB76AB443BB8260C8B2D12"),s(n)])])]),Je]),Qe,t("ul",null,[Xe,t("li",null,[t("p",null,[e("Example:"),t("a",$e,[e("http://127.0.0.1/index/api/version"),s(n)])])]),tn]),en,t("ul",null,[nn,t("li",null,[t("p",null,[e("Example:"),t("a",sn,[e("http://127.0.0.1:8080/index/api/getMediaPlayerList?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc&schema=rtsp&vhost="),an,e("&app=live&stream=test'"),s(n)])])]),on]),ln])}const kn=o(r,[["render",pn],["__file","restful_api.html.vue"]]);export{kn as default};
